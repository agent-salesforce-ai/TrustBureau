<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TrustBureau.ai - The AI Verification Standard</title>
    
    <!-- Tailwind CSS CDN (with Typography plugin) --><script src="https://cdn.tailwindcss.com?plugins=typography"></script>
    
    <!-- Google Fonts: Plus Jakarta Sans (headings) & Inter (body) --><link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Plus+Jakarta+Sans:wght@600;700;800&display=swap" rel="stylesheet">
    
    <!-- 
      *** FIX: Removed Alpine.js from here. It is now at the end of the <body> ***
    -->
    
    <!-- Custom Tailwind Configuration --><script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        heading: ['Plus Jakarta Sans', 'sans-serif'],
                        sans: ['Inter', 'sans-serif'],
                    },
                    colors: {
                        'brand-green': '#00C09A', // Verification Green
                        'brand-dark': '#1A1A1A',   // Near-black for primary text
                        'brand-gray': '#666666',   // Secondary/muted text
                        'brand-light': '#F8F9FA',  // Very light grey background
                        'brand-border': '#E5E7EB', // Subtle border color (Tailwind gray-200)
                    },
                },
            },
            // The typography plugin is correctly loaded via the CDN script tag: ?plugins=typography
        }
    </script>
    <style>
        html {
            scroll-behavior: smooth; /* Enabled smooth scrolling */
        }
        body {
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            background-color: #FFFFFF;
        }
        .gradient-text {
            background: linear-gradient(90deg, #00C09A 0%, #007A63 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .yellow-gradient-text {
            background: linear-gradient(90deg, #FACC15 0%, #EAB308 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .cta-button {
            transition: all 0.3s ease;
        }
        .cta-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0, 192, 154, 0.15);
        }
        .hero-visual {
            background: #FFFFFF;
            border: 1px solid #E5E7EB;
            border-radius: 12px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.05);
            overflow: hidden;
        }
        [x-cloak] { display: none !important; }

        /* Simple loading spinner */
        .loader {
            border: 4px solid #f3f3f3; /* Light grey */
            border-top: 4px solid #00C09A; /* Brand Green */
            border-radius: 50%;
            width: 48px;
            height: 48px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>

<!-- 
    GEMINI API INTEGRATION:
    Alpine.js data is now defined in a script tag at the end of the <body>
    and wrapped in an 'alpine:init' listener to prevent load-order errors.
-->
<body 
    class="font-sans text-brand-dark" 
    x-data="appState()"
>

    <!-- Header / Navigation --><header class="bg-white/80 border-b border-brand-border sticky top-0 z-50 backdrop-blur-md">
        <!-- Logo now resets page to 'home' and clears the report -->
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center" x-data="{ open: false }">
            <!-- Logo --><a href="#" @click.prevent="page = 'home'; reportData = null" class="flex items-center space-x-2.5">
                <!-- Solid Green Shield with White Check --><svg width="40" height="40" viewBox="0 0 50 50" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M25 5L42.5 12.5V27.5C42.5 37.5 25 45 25 45C25 45 7.5 37.5 7.5 27.5V12.5L25 5Z" fill="#00C09A"/>
                    <path d="M17.5 25L22.5 30L32.5 20" stroke="white" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <!-- Solid Black Text --><span class="font-heading text-2xl font-bold text-brand-dark">
                    TrustBureau.ai
                </span>
            </a>
            
            <!-- Navigation Links --><div class="hidden md:flex items-center space-x-7">
                <!-- Links now set page to 'home' before scrolling -->
                <a href="#platform" @click="page = 'home'" class="text-brand-dark hover:text-brand-green font-medium transition-colors">Platform</a>
                <a href="#process" @click="page = 'home'" class="text-brand-dark hover:text-brand-green font-medium transition-colors">Process</a>
                <a href="#pricing" @click="page = 'home'" class="text-brand-dark hover:text-brand-green font-medium transition-colors">Pricing</a>
                <a href="#platform" @click="page = 'home'" class="text-brand-dark hover:text-brand-green font-medium transition-colors">Developers</a>
            </div>
            
            <!-- Members Button: sets page to 'login' --><a href="#" @click.prevent="page = 'login'" class="hidden md:inline-block bg-white border border-brand-border text-brand-dark font-medium py-2.5 px-5 rounded-lg hover:border-brand-gray transition-colors">
                Members
            </a>

            <!-- Mobile Menu Button --><button class="md:hidden" @click="open = !open">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-brand-dark" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16m-7 6h7" />
                </svg>
            </button>

            <!-- Mobile Menu --><div x-show="open" x-transition:enter="transition ease-out duration-200" x-transition:enter-start="opacity-0 scale-95" x-transition:enter-end="opacity-100 scale-100" x-transition:leave="transition ease-in duration-100" x-transition:leave-start="opacity-100 scale-100" x-transition:leave-end="opacity-0 scale-95" class="absolute top-full right-0 mt-2 w-full p-4 md:hidden" @click.away="open = false" x-cloak>
                <div class="bg-white rounded-lg shadow-xl border border-brand-border p-5 space-y-4">
                    <a href="#platform" class="block text-brand-dark hover:text-brand-green font-medium transition-colors" @click="page = 'home'; open = false">Platform</a>
                    <a href="#process" class="block text-brand-dark hover:text-brand-green font-medium transition-colors" @click="page = 'home'; open = false">Process</a>
                    <a href="#pricing" class="block text-brand-dark hover:text-brand-green font-medium transition-colors" @click="page = 'home'; open = false">Pricing</a>
                    <a href="#platform" class="block text-brand-dark hover:text-brand-green font-medium transition-colors" @click="page = 'home'; open = false">Developers</a>
                    <!-- Mobile Members Button: sets page to 'login' and closes menu -->
                    <a href="#" @click.prevent="page = 'login'; open = false" class="block w-full text-center bg-white border border-brand-border text-brand-dark font-medium py-2.5 px-5 rounded-lg hover:border-brand-gray transition-colors">
                        Members
                    </a>
                </div>
            </div>
        </nav>
    </header>

    <!-- Main Content --><main>

        <!-- [START] HOME PAGE CONTENT -->
        <!-- This div wraps all homepage content and only shows when page === 'home' -->
        <div x-show="page === 'home'">
            <section class="bg-white py-24 md:py-36">
                <div class="container mx-auto px-6">
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-16 items-center">
                        <!-- Hero Text --><div class="text-center lg:text-left">
                            <h1 class="text-5xl md:text-7xl font-heading font-extrabold text-brand-dark leading-tight mb-6">
                                The <span class="yellow-gradient-text">Gold Standard</span> of
                                <span class="text-brand-green">AI Underwriting</span>
                            </h1>
                            <p class="text-lg md:text-xl text-brand-gray max-w-xl mx-auto lg:mx-0 mb-10">
                                The AI underwriting tool for advanced decision-making in seconds. Our platform validates, analyzes, and reports on business health to ensure your decisions are fast, fair, and compliant.
                            </p>
                            <div class="flex justify-center lg:justify-start items-center space-x-4">
                                <!-- Request Demo Button: sets page to 'demo' --><a href="#" @click.prevent="page = 'demo'" class="bg-brand-green text-white font-bold py-3.5 px-8 rounded-lg text-lg cta-button">
                                    Request Demo
                                </a>
                                <!-- Read Docs Button: scrolls to platform -->
                                <a href="#platform" @click="page = 'home'" class="bg-white border border-brand-border text-brand-dark font-medium py-3.5 px-8 rounded-lg text-lg hover:border-brand-gray transition-colors">
                                    Read Docs
                                </a>
                            </div>
                        </div>
                        
                        <!-- Hero Visual (Mock UI) --><div class="hero-visual">
                            <div class="bg-brand-light border-b border-brand-border px-4 py-3">
                                <div class="flex items-center space-x-2">
                                    <div class="w-3 h-3 bg-gray-300 rounded-full"></div>
                                    <div class="w-3 h-3 bg-gray-300 rounded-full"></div>
                                    <div class="w-3 h-3 bg-gray-300 rounded-full"></div>
                                </div>
                            </div>
                            <div class="p-6 space-y-5">
                                <div class="flex justify-between items-center">
                                    <span class="font-heading font-bold text-lg">Model: FinCredit v2.1</span>
                                    <span class="bg-yellow-100 text-yellow-700 text-sm font-medium px-3 py-1 rounded-full">Scanning...</span>
                                </div>
                                <div class="space-y-4">
                                    <!-- Item 1 --><div class="flex items-center space-x-3">
                                        <div class="w-10 h-10 bg-green-100 text-green-700 rounded-full flex items-center justify-center">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
                                            </svg>
                                        </div>
                                        <span class="text-brand-dark font-medium">Fairness & Bias Audit</span>
                                        <span class="ml-auto text-green-700 font-medium">Passed</span>
                                    </div>
                                    <!-- Item 2 --><div class="flex items-center space-x-3">
                                        <div class="w-10 h-10 bg-green-100 text-green-700 rounded-full flex items-center justify-center">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
                                            </svg>
                                        </div>
                                        <span class="text-brand-dark font-medium">Security & Robustness</span>
                                        <span class="ml-auto text-green-700 font-medium">Passed</span>
                                    </div>
                                    <!-- Item 3 --><div class="flex items-center space-x-3">
                                        <div class="w-10 h-10 bg-red-100 text-red-700 rounded-full flex items-center justify-center">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd" />
                                            </svg>
                                        </div>
                                        <span class="text-brand-dark font-medium">EU AI Act Compliance</span>
                                        <span class="ml-auto text-red-700 font-medium">Failed</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- CTA Section (No Button) --><section id="demo-top" class="bg-brand-dark">
                <!-- MOBILE: py-12, text-4xl -->
                <div class="container mx-auto px-6 py-12 md:py-16 text-center">
                    <h2 class="text-4xl md:text-5xl font-heading font-extrabold yellow-gradient-text mb-6">
                        Make Decisions in Seconds.
                    </h2>
                    <p class="text-lg md:text-xl text-brand-gray max-w-2xl mx-auto mb-10">
                        See our AI underwriting platform in action. Schedule a personalized demo to see how you can make faster, fairer decisions.
                    </p>
                </div>
            </section>

            <!-- New "Generate Report" Section -->
            <!-- MOBILE: py-12, text-2xl -->
            <section class="bg-brand-light py-12 md:py-16">
                <div class="container mx-auto px-6 max-w-3xl text-center">
                    <h2 class="text-2xl md:text-3xl font-heading font-bold text-brand-dark mb-4">
                        Generate a Live Report
                    </h2>
                    <p class="text-lg text-brand-gray mb-6">
                        Enter any business name to generate a simulated underwriting report using the Gemini API.
                    </p>
                    <div class="flex flex-col md:flex-row gap-2 max-w-lg mx-auto">
                        <input type="text" x-model="businessName" class="flex-grow appearance-none block w-full px-4 py-3 border border-brand-border rounded-md shadow-sm placeholder-brand-gray focus:outline-none focus:ring-brand-green focus:border-brand-green sm:text-sm" placeholder="e.g., QuantumLeap AI LLC">
                        <button @click="generateReport()" :disabled="isLoading" class="bg-brand-green text-white font-bold py-3 px-8 rounded-lg text-lg cta-button flex items-center justify-center disabled:opacity-50">
                            <svg x-show="isLoading" class="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                            </svg>
                            <span x-show="!isLoading">Generate Report</span>
                            <span x-show="isLoading">Generating...</span>
                        </button>
                    </div>
                </div>
            </section>

            <!-- Your Verification Report Section --><section id="report-mockup" class="py-24 bg-white">
                <div class="container mx-auto px-6">
                    <!-- Section Header --><div class="text-center max-w-3xl mx-auto mb-16">
                        <span class="font-heading font-bold text-brand-green bg-green-100 px-3 py-1 rounded-md">See The Output</span>
                        <h2 class="text-4xl md:text-5xl font-heading font-extrabold text-brand-dark mt-6 mb-4">
                            Your Verification Report
                        </h2>
                        <p class="text-lg text-brand-gray" x-show="!reportData && !isLoading">
                            Click "Generate Report" above to see a live example.
                        </p>
                    </div>

                    <!-- Loading State -->
                    <div x-show="isLoading" class="flex justify-center items-center h-64">
                        <div class="loader"></div>
                    </div>

                    <!-- Error State -->
                    <div x-show="errorMessage" class="max-w-3xl mx-auto bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg" x-cloak>
                        <strong class="font-bold">Error:</strong>
                        <span class="block sm:inline" x-text="errorMessage"></span>
                    </div>

                    <!-- 
                        *** FIX ***
                        Wrap the entire report display in a <template x-if="reportData">
                        This prevents Alpine from trying to read properties of 'null' before the API call finishes.
                    -->
                    <template x-if="reportData && !isLoading">
                        <div class="max-w-7xl mx-auto bg-white border border-brand-border rounded-lg shadow-xl overflow-hidden" x-cloak>
                            <!-- Report Header --><div class="p-4 md:p-6 border-b border-brand-border">
                                <div class="flex flex-col md:flex-row justify-between md:items-center space-y-2 md:space-y-0">
                                    <div>
                                        <h3 class="font-heading text-xl md:text-2xl font-bold text-brand-green">Business Verification Report</h3>
                                        <p class="text-xs md:text-sm text-gray-500">Business â€” Report ID: TRUST-88A42F / Generated: <span x-text="new Date().toLocaleDateString()"></span></p>
                                    </div>
                                    <span class="text-xs font-semibold text-gray-500 bg-gray-100 px-3 py-1 rounded-full self-start md:self-center">The AI Verification Standard</span>
                                </div>
                            </div>

                            <!-- Report Body --><div class="p-4 md:p-6">
                                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                                    <!-- Left Column: Status --><div class="lg:col-span-1 space-y-6">
                                        <div>
                                            <h4 class="font-semibold text-brand-dark mb-3">Overall Status</h4>
                                            <div class="p-4 border border-brand-border rounded-lg">
                                                <div class="flex items-center space-x-4">
                                                    <div class="relative w-24 h-24">
                                                        <svg class="w-full h-full" viewBox="0 0 100 100">
                                                            <circle class="text-gray-200" stroke-width="8" stroke="currentColor" fill="transparent" r="42" cx="50" cy="50"></circle>
                                                            <circle :class="{
                                                                'text-brand-green': reportData.overallStatus.scoreSentiment === 'positive',
                                                                'text-yellow-500': reportData.overallStatus.scoreSentiment === 'neutral',
                                                                'text-red-600': reportData.overallStatus.scoreSentiment === 'negative'
                                                            }" stroke-width="8" stroke-dasharray="264" :stroke-dashoffset="`calc(264 - (264 * reportData.overallStatus.score) / 10)`" stroke-linecap="round" stroke="currentColor" fill="transparent" r="42" cx="50" cy="50" style="transform: rotate(-90deg); transform-origin: 50% 50%;"></circle>
                                                        </svg>
                                                        <div class="absolute inset-0 flex items-center justify-center">
                                                            <span class="text-3xl font-bold text-brand-dark" x-text="reportData.overallStatus.score * 100"></span>
                                                        </div>
                                                    </div>
                                                    <div>
                                                        <span class="text-2xl font-bold" :class="{
                                                            'text-brand-green': reportData.overallStatus.scoreSentiment === 'positive',
                                                            'text-yellow-600': reportData.overallStatus.scoreSentiment === 'neutral',
                                                            'text-red-600': reportData.overallStatus.scoreSentiment === 'negative'
                                                        }" x-text="reportData.overallStatus.statusText"></span>
                                                        <p class="text-sm text-gray-500">Simulated financial health</p>
                                                    </div>
                                                </div>
                                                <div class="mt-4 space-y-2 text-sm">
                                                    <div class="flex justify-between">
                                                        <span class="text-gray-500">Health: <span class="font-medium" :class="{
                                                            'text-green-600': reportData.overallStatus.scoreSentiment === 'positive',
                                                            'text-yellow-600': reportData.overallStatus.scoreSentiment === 'neutral',
                                                            'text-red-600': reportData.overallStatus.scoreSentiment === 'negative'
                                                        }" x-text="reportData.overallStatus.health"></span></span>
                                                        <span class="text-gray-500">Risk: <span class="font-medium" :class="{
                                                            'text-green-600': reportData.overallStatus.scoreSentiment === 'positive',
                                                            'text-yellow-600': reportData.overallStatus.scoreSentiment === 'neutral',
                                                            'text-red-600': reportData.overallStatus.scoreSentiment === 'negative'
                                                        }" x-text="reportData.overallStatus.risk"></span></span>
                                                    </div>
                                                    <div class="w-full bg-gray-200 rounded-full h-2">
                                                        <div :class="{
                                                            'bg-brand-green': reportData.overallStatus.scoreSentiment === 'positive',
                                                            'bg-yellow-500': reportData.overallStatus.scoreSentiment === 'neutral',
                                                            'bg-red-600': reportData.overallStatus.scoreSentiment === 'negative'
                                                        }" class="h-2 rounded-full" :style="`width: ${reportData.overallStatus.score * 10}%`"></div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="mt-4 p-4 border border-brand-border rounded-lg text-sm space-y-2">
                                                <div class="flex justify-between">
                                                    <span class="text-gray-500">NMLS</span>
                                                    <span class="font-medium text-brand-dark" x-text="reportData.entityDetails.nmls"></span>
                                                </div>
                                                <div class="flex justify-between">
                                                    <span class="text-gray-500">Status</span>
                                                    <span class="font-medium" :class="{
                                                        'text-green-600': reportData.entityDetails.statusSentiment === 'positive',
                                                        'text-yellow-600': reportData.entityDetails.statusSentiment === 'neutral',
                                                        'text-red-600': reportData.entityDetails.statusSentiment === 'negative'
                                                    }" x-text="reportData.entityDetails.nmlsStatus"></span>
                                                </div>
                                                <div class="flex justify-between">
                                                    <span class="text-gray-500">Entity</span>
                                                    <span class="font-medium text-brand-dark" x-text="reportData.entityDetails.entity"></span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Right Column: Metrics --><div class="lg:col-span-2">
                                        <h4 class="font-semibold text-brand-dark mb-3">Key Metrics</h4>
                                        <!-- MOBILE: Add overflow-x-auto for responsive table -->
                                        <div class="border border-brand-border rounded-lg overflow-x-auto">
                                            <table class="min-w-full divide-y divide-gray-200">
                                                <thead class="bg-gray-50">
                                                    <tr>
                                                        <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Metric</th>
                                                        <th class="px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Value</th>
                                                    </tr>
                                                </thead>
                                                <tbody class="bg-white divide-y divide-gray-200 text-sm">
                                                    <template x-for="metric in reportData.keyMetrics" :key="metric.metric">
                                                        <tr>
                                                            <td class="px-4 py-3 text-gray-500 whitespace-nowrap" x-text="metric.metric"></td>
                                                            <td class="px-4 py-3 text-right font-medium" :class="{
                                                                'text-green-600': metric.sentiment === 'positive',
                                                                'text-red-600': metric.sentiment === 'negative',
                                                                'text-brand-dark': metric.sentiment === 'neutral'
                                                            }" x-text="metric.value"></td>
                                                        </tr>
                                                    </template>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>

                                <!-- MoneyThumb & Charts --><div class="mt-6">
                                    <h4 class="font-semibold text-brand-dark mb-3">Financial Snapshot</h4>
                                    <!-- MoneyThumb Table -->
                                    <!-- MOBILE: Add overflow-x-auto for responsive table -->
                                    <div class="border border-brand-border rounded-lg mb-6 overflow-x-auto">
                                        <table class="min-w-full divide-y divide-gray-200">
                                            <thead class="bg-gray-50">
                                                <tr>
                                                    <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Bank</th>
                                                    <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Avg Deposits</th>
                                                    <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"># Deposits</th>
                                                    <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Avg Withdrawals</th>
                                                    <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Avg AOB</th>
                                                    <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Avg NSFs</th>
                                                    <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Ending Bal</th>
                                                    <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Transfers In</th>
                                                    <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">T'humpdri Score</th>
                                                </tr>
                                            </thead>
                                            <tbody class="bg-white divide-y divide-gray-200 text-sm whitespace-nowrap">
                                                <tr>
                                                    <td class="px-4 py-3 text-gray-500" x-text="reportData.financialSnapshot.bank"></td>
                                                    <td class="px-4 py-3 text-gray-500" x-text="reportData.financialSnapshot.avgDeposits"></td>
                                                    <td class="px-4 py-3 text-gray-500" x-text="reportData.financialSnapshot.numDeposits"></td>
                                                    <td class="px-4 py-3 text-gray-500" x-text="reportData.financialSnapshot.avgWithdrawals"></td>
                                                    <td class="px-4 py-3 text-gray-500" x-text="reportData.financialSnapshot.avgAOB"></td>
                                                    <td class="px-4 py-3 font-medium" :class="{
                                                        'text-green-600': reportData.financialSnapshot.nsfSentiment === 'positive',
                                                        'text-red-600': reportData.financialSnapshot.nsfSentiment === 'negative',
                                                        'text-yellow-600': reportData.financialSnapshot.nsfSentiment === 'neutral'
                                                    }" x-text="reportData.financialSnapshot.avgNSFs"></td>
                                                    <td class="px-4 py-3 text-gray-500" x-text="reportData.financialSnapshot.endingBal"></td>
                                                    <td class="px-4 py-3 text-gray-500" x-text="reportData.financialSnapshot.transfersIn"></td>
                                                    <td class="px-4 py-3 font-medium" :class="{
                                                        'text-green-600': reportData.financialSnapshot.scoreSentiment === 'positive',
                                                        'text-red-600': reportData.financialSnapshot.scoreSentiment === 'negative',
                                                        'text-yellow-600': reportData.financialSnapshot.scoreSentiment === 'neutral'
                                                    }" x-text="reportData.financialSnapshot.thumpdriScore"></td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <!-- Charts (Static) --><div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                                        <div>
                                            <h5 class="font-medium text-brand-dark mb-2">Revenue Trend</h5>
                                            <div class="p-4 border border-brand-border rounded-lg h-48">
                                                <svg width="100%" height="100%" viewBox="0 0 100 50" preserveAspectRatio="none">
                                                    <polyline fill="none" stroke="#00C09A" stroke-width="2" points="0,40 10,35 20,30 30,25 40,20 50,22 60,15 70,10 80,12 90,5 100,10" />
                                                    <line x1="0" y1="48" x2="100" y2="48" stroke="#E5E7EB" stroke-width="1" />
                                                </svg>
                                            </div>
                                        </div>
                                        <div>
                                            <h5 class="font-medium text-brand-dark mb-2">Ending Balance</h5>
                                            <div class="p-4 border border-brand-border rounded-lg h-48">
                                                <svg width="100%" height="100%" viewBox="0 0 100 50" preserveAspectRatio="none">
                                                    <polyline fill="none" stroke="#00C09A" stroke-width="2" points="0,30 10,28 20,35 30,30 40,25 50,20 60,25 70,15 80,18 90,10 100,15" />
                                                    <line x1="0" y1="48" x2="100" y2="48" stroke="#E5E7EB" stroke-width="1" />
                                                </svg>
                                            </div>
                                        </div>
                                        <div>
                                            <h5 class="font-medium text-brand-dark mb-2">NSF / OVD Events</h5>
                                            <div class="p-4 border border-brand-border rounded-lg h-48 flex items-end space-x-2">
                                                <svg width="100%" height="100%" viewBox="0 0 100 50" preserveAspectRatio="none" class="flex items-end">
                                                    <rect x="5" y="45" width="10" height="3" fill="#00C09A" />
                                                    <rect x="20" y="48" width="10" height="0" fill="#00C09A" />
                                                    <rect x="35" y="48" width="10" height="0" fill="#00C09A" />
                                                    <rect x="50" y="40" width="10" height="8" fill="#FBBF24" />
                                                    <rect x="65" y="35" width="10" height="13" fill="#EF4444" />
                                                    <rect x="80" y="48" width="10" height="0" fill="#00C09A" />
                                                    <line x1="0" y1="48" x2="100" y2="48" stroke="#E5E7EB" stroke-width="1" />
                                                </svg>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Banking Activity --><div class="mt-6">
                                    <h4 class="font-semibold text-brand-dark mb-3">Monthly Banking Activity</h4>
                                    <div class="border border-brand-border rounded-lg overflow-x-auto">
                                        <table class="min-w-full divide-y divide-gray-200">
                                            <thead class="bg-gray-50">
                                                <tr>
                                                    <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Month</th>
                                                    <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Total Credits</th>
                                                    <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Num Credits</th>
                                                    <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">True Revenue</th>
                                                    <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Transfers In</th>
                                                    <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Avg Balance</th>
                                                    <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">NSF/OVD</th>
                                                    <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">End Balance</th>
                                                </tr>
                                            </thead>
                                            <tbody class="bg-white divide-y divide-gray-200 text-sm whitespace-nowrap">
                                                <template x-for="row in reportData.monthlyBanking" :key="row.month">
                                                    <tr>
                                                        <td class="px-4 py-3 text-gray-500" x-text="row.month"></td>
                                                        <td class="px-4 py-3 text-gray-500" x-text="row.totalCredits"></td>
                                                        <td class="px-4 py-3 text-gray-500" x-text="row.numCredits"></td>
                                                        <td class="px-4 py-3 text-gray-500" x-text="row.trueRevenue"></td>
                                                        <td class="px-4 py-3 text-gray-500" x-text="row.transfersIn"></td>
                                                        <td class="px-4 py-3 text-gray-500" x-text="row.avgBalance"></td>
                                                        <td class="px-4 py-3 font-medium" :class="{
                                                            'text-green-600': row.nsfSentiment === 'positive',
                                                            'text-red-600': row.nsfSentiment === 'negative',
                                                            'text-yellow-600': row.nsfSentiment === 'neutral'
                                                        }" x-text="row.nsfOvd"></td>
                                                        <td class="px-4 py-3 text-gray-500" x-text="row.endBalance"></td>
                                                    </tr>
                                                </template>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>

                                <!-- Public Records --><div class="mt-6">
                                    <h4 class="font-semibold text-brand-dark mb-3">Public Records</h4>
                                    <!-- MOBILE: Stacks to single column -->
                                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                                        <!-- UCC Filings --><div class="border border-brand-border rounded-lg">
                                            <h5 class="font-medium text-brand-dark p-4 border-b border-brand-border">UCC Filings</h5>
                                            <div class="p-4 text-sm space-y-2">
                                                <template x-if="reportData.publicRecords.uccFilings.length === 0">
                                                    <p class="text-gray-500">None reported</p>
                                                </template>
                                                <template x-for="item in reportData.publicRecords.uccFilings">
                                                    <div>
                                                        <div class="flex justify-between">
                                                            <span class="text-gray-500" x-text="item.party"></span>
                                                            <span class="font-medium text-brand-dark" x-text="item.type"></span>
                                                        </div>
                                                        <p class="text-xs text-gray-400" x-text="item.details"></p>
                                                    </div>
                                                </template>
                                            </div>
                                        </div>
                                        <!-- Liens & Judgments --><div class="border border-brand-border rounded-lg">
                                            <h5 class="font-medium text-brand-dark p-4 border-b border-brand-border">Liens & Judgments</h5>
                                            <div class="p-4 text-sm space-y-2">
                                                <template x-if="reportData.publicRecords.liens.length === 0">
                                                    <p class="text-gray-500">None reported</p>
                                                </template>
                                                <template x-for="item in reportData.publicRecords.liens">
                                                    <div>
                                                        <div class="flex justify-between">
                                                            <span class="text-gray-500" x-text="item.type"></span>
                                                            <span class="font-medium text-yellow-600" x-text="item.amount"></span>
                                                        </div>
                                                        <p class="text-xs text-gray-400" x-text="item.details"></p>
                                                    </div>
                                                </template>
                                            </div>
                                        </div>
                                        <!-- Court Filings --><div class="border border-brand-border rounded-lg">
                                            <h5 class="font-medium text-brand-dark p-4 border-b border-brand-border">Court Filings</h5>
                                            <div class="p-4 text-sm space-y-2">
                                                <template x-if="reportData.publicRecords.courts.length === 0">
                                                    <p class="text-gray-500">None reported</p>
                                                </template>
                                                <template x-for="item in reportData.publicRecords.courts">
                                                    <div>
                                                        <div class="flex justify-between">
                                                            <span class="text-gray-500" x-text="item.type"></span>
                                                            <span class="font-medium text-yellow-600" x-text="item.status"></span>
                                                        </div>
                                                        <p class="text-xs text-gray-400" x-text="item.details"></p>
                                                    </div>
                                                </template>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- SOS & AI Summary --><div class="mt-6 grid grid-cols-1 lg:grid-cols-2 gap-6">
                                    <!-- SOS Records --><div class="border border-brand-border rounded-lg">
                                        <h5 class="font-medium text-brand-dark p-4 border-b border-brand-border">SOS / Secretary of State Records</h5>
                                        <div class="p-4 overflow-x-auto">
                                            <table class="min-w-full text-sm">
                                                <thead>
                                                    <tr class="border-b border-brand-border">
                                                        <th class="py-2 text-left text-xs font-medium text-gray-500 uppercase">Entity Name</th>
                                                        <th class="py-2 text-left text-xs font-medium text-gray-500 uppercase">Entity Type</th>
                                                        <th class="py-2 text-left text-xs font-medium text-gray-500 uppercase">Formation Date</th>
                                                        <th class="py-2 text-left text-xs font-medium text-gray-500 uppercase">Entity ID</th>
                                                        <th class="py-2 text-left text-xs font-medium text-gray-500 uppercase">Status</th>
                                                        <th class="py-2 text-left text-xs font-medium text-gray-500 uppercase">Registered Agent</th>
                                                    </tr>
                                                </thead>
                                                <tbody class="whitespace-nowrap">
                                                    <template x-for="item in reportData.sosRecords">
                                                        <tr>
                                                            <td class="py-3 text-gray-500" x-text="item.entityName"></td>
                                                            <td class="py-3 text-gray-500" x-text="item.entityType"></td>
                                                            <td class="py-3 text-gray-500" x-text="item.formationDate"></td>
                                                            <td class="py-3 text-gray-500" x-text="item.entityId"></td>
                                                            <td class="py-3 font-medium" :class="{
                                                                'text-green-600': item.statusSentiment === 'positive',
                                                                'text-red-600': item.statusSentiment === 'negative',
                                                                'text-yellow-600': item.statusSentiment === 'neutral'
                                                            }" x-text="item.status"></td>
                                                            <td class="py-3 text-gray-500" x-text="item.agent"></td>
                                                        </tr>
                                                    </template>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>

                                    <!-- AI Summary --><div class="border border-brand-border rounded-lg">
                                        <h5 class="font-medium text-brand-dark p-4 border-b border-brand-border">AI Summary & Recommendations</h5>
                                        <!-- 
                                            *** FIX: Corrected typo 'classin' to 'class' ***
                                            Use prose to style the markdown-like bullet points from the AI 
                                        -->
                                        <div class="p-6 text-sm text-gray-600 space-y-2 prose prose-sm" x-html="reportData.aiSummary.replace(/- /g, '<li>').replace(/\\n/g, '')">
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </template> <!-- End of x-if="reportData" -->
                </div>
            </section>

            <!-- "Trusted By" Section --><section class="py-16 bg-brand-light">
                <div class="container mx-auto px-6">
                    <h3 class="text-center text-sm font-semibold text-brand-gray tracking-wider uppercase mb-8">
                        Certified by TrustBureau.ai
                    </h3>
                    <div class="flex flex-wrap justify-center items-center gap-x-12 gap-y-6 opacity-70">
                        <!-- Placeholder logos --><span class="text-2xl font-bold text-brand-green">FutureTech</span>
                        <span class="text-2xl font-bold text-brand-green">QuantumLeap</span>
                        <span class="text-2xl font-bold text-brand-green">Axiom Inc.</span>
                        <span class="text-2xl font-bold text-brand-green">CodeGenius</span>
                        <span class="text-2xl font-bold text-brand-green">SynthData</span>
                    </div>
                </div>
            </section>

            <!-- "How it Works" Section --><section id="process" class="py-24 bg-white">
                <div class="container mx-auto px-6 max-w-4xl">
                    <div class="text-center max-w-2xl mx-auto mb-16">
                        <h2 class="text-4xl md:text-5xl font-heading font-extrabold text-brand-dark mb-4">
                            A Simple, Verifiable Process
                        </h2>
                        <p class="text-lg text-brand-gray">
                            Our streamlined process makes AI governance simple, fast, and transparent.
                        </p>
                    </div>
                    
                    <div class="space-y-16">
                        <!-- Step 1 --><div class="flex flex-col md:flex-row items-start space-y-4 md:space-y-0 md:space-x-8">
                            <!-- MOBILE: text-6xl -->
                            <div class="font-heading font-bold text-6xl md:text-7xl text-brand-dark">01</div>
                            <div>
                                <h3 class="font-heading text-2xl font-bold text-brand-dark mb-3">Connect & Scan</h3>
                                <p class="text-lg text-brand-gray">
                                    Securely connect your models, data, or platform via our API. Our scanner auto-detects vulnerabilities, biases, and compliance gaps.
                                </p>
                            </div>
                        </div>
                        
                        <!-- Step 2 --><div class="flex flex-col md:flex-row items-start space-y-4 md:space-y-0 md:space-x-8">
                            <!-- MOBILE: text-6xl -->
                            <div class="font-heading font-bold text-6xl md:text-7xl yellow-gradient-text">02</div>
                            <div>
                                <h3 class="font-heading text-2xl font-bold text-brand-dark mb-3">Analyze & Remediate</h3>
                                <p class="text-lg text-brand-gray">
                                    Receive a detailed risk dashboard with scorable, actionable insights. Use our tools and recommendations to fix issues before they become a problem.
                                </p>
                            </div>
                        </div>
                        
                        <!-- Step 3 --><div class="flex flex-col md:flex-row items-start space-y-4 md:space-y-0 md:space-x-8">
                            <!-- MOBILE: text-6xl -->
                            <div class="font-heading font-bold text-6xl md:text-7xl text-brand-green">03</div>
                            <div>
                                <h3 class="font-heading text-xl md:text-2xl font-bold text-brand-dark mb-3">Certify & Monitor</h3>
                                <p class="text-lg text-brand-gray">
                                    Issue a "TrustBureau Certified" seal to display on your products. Our platform continuously monitors your models in production to prevent trust drift.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Platform Features Section --><section id="platform" class="py-24 bg-brand-light">
                <div class="container mx-auto px-6">
                    <div class="text-center max-w-3xl mx-auto mb-16">
                        <span class="font-heading font-bold text-brand-green bg-green-100 px-3 py-1 rounded-md">The Platform</span>
                        <h2 class="text-4xl md:text-5xl font-heading font-extrabold yellow-gradient-text mt-6 mb-4">
                            One Solution for AI Governance
                        </h2>
                        <p class="text-lg text-brand-gray">
                            Our platform provides a complete, end-to-end solution for AI governance, risk, and compliance (GRC).
                        </p>
                    </div>
                    
                    <!-- Features Grid --><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                        
                        <!-- Feature Card 1 --><div class="bg-white p-6 rounded-lg shadow-sm border border-brand-border">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-brand-green mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
                            </svg>
                            <h3 class="font-heading text-xl font-bold text-brand-dark mb-2">Model Auditing</h3>
                            <p class="text-brand-gray">
                                Generate independent audit reports for performance, safety, and security.
                            </p>
                        </div>

                        <!-- Feature Card 2 --><div class="bg-white p-6 rounded-lg shadow-sm border border-brand-border">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-yellow-500 mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M3 6l3 1m0 0l-3 9a5.002 5.002 0 0010 0l-3-9m0 0l3-1m-3 1v11m0-11l3 9m-3-9l-3 9M12 6l3 1m0 0l-3 9a5.002 5.002 0 0010 0l-3-9m0 0l3-1m-3 1v11m0-11l3 9m-3-9l-3 9" />
                            </svg>
                            <h3 class="font-heading text-xl font-bold text-brand-dark mb-2">Bias & Fairness</h3>
                            <p class="text-brand-gray">
                                Identify and mitigate algorithmic bias across all protected classes.
                            </p>
                        </div>
                        
                        <!-- Feature Card 3 --><div class="bg-white p-6 rounded-lg shadow-sm border border-brand-border">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-brand-dark mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />
                            </svg>
                            <h3 class="font-heading text-xl font-bold text-brand-dark mb-2">Security & Robustness</h3>
                            <p class="text-brand-gray">
                                Test for adversarial attacks, data poisoning, and other vulnerabilities.
                            </p>
                        </div>

                        <!-- Feature Card 4 --><div class="bg-white p-6 rounded-lg shadow-sm border border-brand-border">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-brand-green mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M10 21h7a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v11m0 5l4-4m-4 0l4 4" />
                            </svg>
                            <h3 class="font-heading text-xl font-bold text-brand-dark mb-2">Compliance Hub</h3>
                            <p class="text-brand-gray">
                                Automate monitoring and reporting for EU AI Act, GDPR, HIPAA, and more.
                            </p>
                        </div>

                        <!-- Feature Card 5 --><div class="bg-white p-6 rounded-lg shadow-sm border border-brand-border">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-yellow-500 mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16v4m-2-2h4m5 16v4m-2-2h4M17 3v4m-2-2h4M3 11h18M3 7v8M21 7v8" />
                            </svg>
                            <h3 class="font-heading text-xl font-bold text-brand-dark mb-2">Explainable AI (XAI)</h3>
                            <p class="text-brand-gray">
                                Generate human-readable explanations for complex model decisions.
                            </p>
                        </div>

                        <!-- Feature Card 6 --><div class="bg-white p-6 rounded-lg shadow-sm border border-brand-border">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-brand-dark mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2z" />
                            </svg>
                            <h3 class="font-heading text-xl font-bold text-brand-dark mb-2">Real-time Monitoring</h3>
                            <p class="text-brand-gray">
                                Get alerts on model drift, data integrity issues, and new threats.
                            </p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Pricing Section --><section id="pricing" class="py-24 bg-white">
                <div class="container mx-auto px-6">
                    <div class="text-center max-w-3xl mx-auto mb-16">
                        <h2 class="text-4xl md:text-5xl font-heading font-extrabold text-brand-dark mb-4">
                            Pricing for Underwriting Teams
                        </h2>
                        <p class="text-lg text-brand-gray">
                            Choose a plan that scales with your team's decision-making volume.
                        </p>
                    </div>
                    
                    <!-- Pricing Grid --><div class="grid grid-cols-1 lg:grid-cols-3 gap-8 max-w-6xl mx-auto">
                        
                        <!-- Plan 1: Pro --><div class="bg-white rounded-xl shadow-lg p-8 flex flex-col border border-brand-border">
                            <h3 class="font-heading text-lg font-bold text-brand-green uppercase">Pro</h3>
                            <p class="text-brand-gray mb-6 h-12">For small teams and regional banks.</p>
                            <div class="my-4">
                                <span class="text-5xl font-heading font-extrabold text-brand-dark">$499</span>
                                <span class="text-brand-gray"> / mo</span>
                            </div>
                            <ul class="space-y-3 text-brand-gray mb-8 flex-grow">
                                <li class="flex items-center"><svg class="w-5 h-5 text-brand-green mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>5 User Seats</li>
                                <li class="flex items-center"><svg class="w-5 h-5 text-brand-green mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>Up to 250 Reports / mo</li>
                                <li class="flex items-center"><svg class="w-5 h-5 text-brand-green mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>Standard AI Analysis</li>
                                <li class="flex items-center"><svg class="w-5 h-5 text-brand-green mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>Email Support</li>
                            </ul>
                            <!-- Button sets page to 'demo' --><a href="#" @click.prevent="page = 'demo'" class="mt-auto w-full text-center bg-brand-light text-brand-dark font-bold py-3 px-6 rounded-lg hover:bg-brand-border transition-colors">
                                Get Started
                            </a>
                        </div>
                        
                        <!-- Plan 2: Business (Featured) --><div class="bg-white rounded-xl shadow-2xl p-8 flex flex-col relative lg:scale-105 border-2 border-brand-green"> <!-- MOBILE: Removed scale-105 -->
                            <div class="absolute top-0 -translate-y-1/2 left-1/2 -translate-x-1/2 bg-brand-green text-white text-xs font-bold uppercase tracking-wider px-4 py-1.5 rounded-full">
                                Most Popular
                            </div>
                            <h3 class="font-heading text-lg font-bold text-brand-green uppercase">Business</h3>
                            <p class="text-brand-gray mb-6 h-12">For established teams and underwriting departments.</p>
                            <div class="my-4">
                                <span class="text-5xl font-heading font-extrabold text-brand-dark">$1,999</span>
                                <span class="text-brand-gray"> / mo</span>
                            </div>
                            <ul class="space-y-3 text-brand-gray mb-8 flex-grow">
                                <li class="flex items-center"><svg class="w-5 h-5 text-brand-green mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>20 User Seats</li>
                                <li class="flex items-center"><svg class="w-5 h-5 text-brand-green mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>Up to 1,500 Reports / mo</li>
                                <li class="flex items-center"><svg class="w-5 h-5 text-brand-green mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>Advanced AI Analysis & XAI</li>
                                <!-- *** FIX: Corrected typo class_name to class *** -->
                                <li class="flex items-center"><svg class="w-5 h-5 text-brand-green mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>Compliance Modules (EU, GDPR)</li>
                                <li class="flex items-center"><svg class="w-5 h-5 text-brand-green mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>Priority Support</li>
                            </ul>
                            <!-- Button sets page to 'demo' --><a href="#" @click.prevent="page = 'demo'" class="mt-auto w-full text-center bg-brand-green text-white font-bold py-3.5 px-6 rounded-lg cta-button">
                                Start Free Trial
                            </a>
                        </div>
                        
                        <!-- Plan 3: Enterprise --><div class="bg-white rounded-xl shadow-lg p-8 flex flex-col border border-brand-border">
                            <h3 class="font-heading text-lg font-bold text-brand-green uppercase">Enterprise</h3>
                            <p class="text-brand-gray mb-6 h-12">For large-scale, automated, or on-premise deployments.</p>
                            <div class="my-4">
                                <span class="text-5xl font-heading font-extrabold text-brand-dark">Custom</span>
                            </div>
                            <ul class="space-y-3 text-brand-gray mb-8 flex-grow">
                                <li class="flex items-center"><svg class="w-5 h-5 text-brand-green mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>Unlimited Users & Reports</li>
                                <li class="flex items-center"><svg class="w-5 h-5 text-brand-green mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>Full API & Integration Access</li>
                                <li class="flex items-center"><svg classs="w-5 h-5 text-brand-green mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>On-Premise & VPC Deployment</li>
                                <li class="flex items-center"><svg class="w-5 h-5 text-brand-green mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>Dedicated Account Manager & SLAs</li>
                            </ul>
                            <!-- Button sets page to 'demo' --><a href="#" @click.prevent="page = 'demo'" class="mt-auto w-full text-center bg-brand-dark text-white font-bold py-3 px-6 rounded-lg hover:bg-brand-green transition-colors">
                                Contact Sales
                            </a>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Final CTA Section (MOVED) --><section id="demo-bottom" class="bg-brand-dark">
                <!-- MOBILE: py-16 -->
                <div class="container mx-auto px-6 py-16 md:py-24 text-center">
                    <h2 class="text-4xl md:text-5xl font-heading font-extrabold text-white mb-6">
                        Make Decisions in Seconds
                    </h2>
                    <p class="text-lg md:text-xl text-brand-gray max-w-2xl mx-auto mb-10">
                        See our AI underwriting platform in action. Schedule a personalized demo to see how you can make faster, fairer decisions.
                    </p>
                    <!-- Button sets page to 'demo' --><a href="#" @click.prevent="page = 'demo'" class="bg-brand-green text-white font-bold py-3.5 px-10 rounded-lg text-lg cta-button">
                        Request Your Demo
                    </a>
                </div>
            </section>
        </div>
        <!-- [END] HOME PAGE CONTENT -->


        <!-- [START] LOGIN PAGE -->
        <!-- This div only shows when page === 'login' -->
        <div x-show="page === 'login'" x-cloak>
            <div class="flex items-center justify-center min-h-screen bg-brand-light py-12 px-4 sm:px-6 lg:px-8">
                <div class="max-w-md w-full space-y-8">
                    <div>
                        <!-- Logo (links back home) --><a href="#" @click.prevent="page = 'home'" class="flex justify-center items-center space-x-2.5">
                            <svg width="40" height="40" viewBox="0 0 50 50" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M25 5L42.5 12.5V27.5C42.5 37.5 25 45 25 45C25 45 7.5 37.5 7.5 27.5V12.5L25 5Z" fill="#00C09A"/>
                                <path d="M17.5 25L22.5 30L32.5 20" stroke="white" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            <span class="font-heading text-2xl font-bold text-brand-dark">TrustBureau.ai</span>
                        </a>
                        <h2 class="mt-6 text-center text-3xl font-heading font-extrabold text-brand-dark">
                            Member Login
                        </h2>
                    </div>
                    <form class="mt-8 space-y-6" action="#" method="POST">
                        <input type="hidden" name="remember" value="true">
                        <div class="rounded-md shadow-sm -space-y-px">
                            <div>
                                <label for="email-address" class="sr-only">Email address</label>
                                <input id="email-address" name="email" type="email" autocomplete="email" required class="appearance-none rounded-none relative block w-full px-3 py-3 border border-brand-border placeholder-brand-gray text-brand-dark rounded-t-md focus:outline-none focus:ring-brand-green focus:border-brand-green focus:z-10 sm:text-sm" placeholder="Email address">
                            </div>
                            <div>
                                <label for="password" class="sr-only">Password</label>
                                <input id="password" name="password" type="password" autocomplete="current-password" required class="appearance-none rounded-none relative block w-full px-3 py-3 border border-brand-border placeholder-brand-gray text-brand-dark rounded-b-md focus:outline-none focus:ring-brand-green focus:border-brand-green focus:z-10 sm:text-sm" placeholder="Password">
                            </div>
                        </div>

                        <div class="flex items-center justify-between">
                            <div class="text-sm">
                                <a href="#" class="font-medium text-brand-green hover:text-green-700">
                                    Forgot your password?
                                </a>
                            </div>
                        </div>

                        <div>
                            <button type="submit" class="group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-brand-green hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-brand-green cta-button">
                                Sign in
                            </button>
                        </div>
                    </form>
                    <div class="text-center">
                        <a href="#" @click.prevent="page = 'home'" class="font-medium text-brand-green hover:text-green-700">
                            &larr; Back to Home
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <!-- [END] LOGIN PAGE -->


        <!-- [START] DEMO REQUEST PAGE -->
        <!-- This div only shows when page === 'demo' -->
        <div x-show="page === 'demo'" x-cloak>
            <div class="min-h-screen bg-brand-light py-12 px-4 sm:px-6 lg:px-8">
                <div class="max-w-xl mx-auto">
                    <div>
                        <!-- Logo (links back home) - REMOVED per request -->
                        <h2 class="mt-6 text-center text-3xl font-heading font-extrabold text-brand-dark">
                            Request a Demo
                        </h2>
                        <p class="mt-2 text-center text-lg text-brand-gray">
                            See our AI underwriting platform in action. Fill out the form below to schedule a call.
                        </p>
                    </div>
                    
                    <form class="mt-8 space-y-6 bg-white p-6 md:p-8 rounded-lg shadow-md border border-brand-border" action="#" method="POST">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label for="first-name" class="block text-sm font-medium text-brand-dark">First Name</label>
                                <input type="text" name="first-name" id="first-name" required class="mt-1 block w-full px-3 py-3 border border-brand-border rounded-md shadow-sm placeholder-brand-gray focus:outline-none focus:ring-brand-green focus:border-brand-green sm:text-sm">
                            </div>
                            <div>
                                <label for="last-name" class="block text-sm font-medium text-brand-dark">Last Name</label>
                                <input type="text" name="last-name" id="last-name" required class="mt-1 block w-full px-3 py-3 border border-brand-border rounded-md shadow-sm placeholder-brand-gray focus:outline-none focus:ring-brand-green focus:border-brand-green sm:text-sm">
                            </div>
                        </div>
                        <div>
                            <label for="demo-email" class="block text-sm font-medium text-brand-dark">Work Email</label>
                            <input type="email" name="demo-email" id="demo-email" required class="mt-1 block w-full px-3 py-3 border border-brand-border rounded-md shadow-sm placeholder-brand-gray focus:outline-none focus:ring-brand-green focus:border-brand-green sm:text-sm" placeholder="you@company.com">
                        </div>
                        <div>
                            <label for="company" class="block text-sm font-medium text-brand-dark">Company</label>
                            <input type="text" name="company" id="company" required class="mt-1 block w-full px-3 py-3 border border-brand-border rounded-md shadow-sm placeholder-brand-gray focus:outline-none focus:ring-brand-green focus:border-brand-green sm:text-sm">
                        </div>
                        <div>
                            <label for="message" class="block text-sm font-medium text-brand-dark">Message (Optional)</label>
                            <textarea id="message" name="message" rows="4" class="mt-1 block w-full px-3 py-3 border border-brand-border rounded-md shadow-sm placeholder-brand-gray focus:outline-none focus:ring-brand-green focus:border-brand-green sm:text-sm" placeholder="Tell us a bit about your needs..."></textarea>
                        </div>

                        <div>
                            <button type="submit" class="group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-brand-green hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-brand-green cta-button">
                                Submit Request
                            </button>
                        </div>
                    </form>
                    <div class="text-center mt-6">
                        <a href="#" @click.prevent="page = 'home'" class="font-medium text-brand-green hover:text-green-700">
                            &larr; Back to Home
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <!-- [END] DEMO REQUEST PAGE -->


    </main>

    <footer class="bg-white border-t border-brand-border">
        <div class="container mx-auto px-6 py-16">
            <div class="flex flex-col md:flex-row justify-between">
                <!-- Logo and Copyright --><div class="mb-8 md:mb-0 max-w-sm">
                    <!-- Logo links home --><a href="#" @click.prevent="page = 'home'" class="flex items-center space-x-2.5 mb-4">
                        <!-- Solid Green Shield with White Check --><svg width="40" height="40" viewBox="0 0 50 50" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M25 5L42.5 12.5V27.5C42.5 37.5 25 45 25 45C25 45 7.5 37.5 7.5 27.5V12.5L25 5Z" fill="#00C09A"/>
                            <path d="M17.5 25L22.5 30L32.5 20" stroke="white" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <span class="font-heading text-2xl font-bold text-brand-dark">TrustBureau.ai</span>
                    </a>
                    <p class="text-sm text-brand-gray">
                        The AI Verification Standard.
                        <br>&copy; 2025 TrustBureau.ai, Inc. All rights reserved.
                    </p>
                </div>
                
                <!-- Footer Navigation --><div class="grid grid-cols-2 md:grid-cols-4 gap-8">
                    <div>
                        <h4 class="font-heading font-semibold text-brand-dark mb-3">Product</h4>
                        <ul class="space-y-2">
                            <!-- Links set page to 'home' before scrolling -->
                            <li><a href="#platform" @click="page = 'home'" class="text-brand-gray hover:text-brand-dark">Platform</a></li>
                            <li><a href="#process" @click="page = 'home'" class="text-brand-gray hover:text-brand-dark">Process</a></li>
                            <li><a href="#pricing" @click="page = 'home'" class="text-brand-gray hover:text-brand-dark">Pricing</a></li>
                            <li><a href="#" @click.prevent="page = 'demo'" class="text-brand-gray hover:text-brand-dark">Book a Demo</a></li>
                        </ul>
                    </div>
                    <div>
                        <h4 class="font-heading font-semibold text-brand-dark mb-3">Resources</h4>
                        <ul class="space-y-2">
                            <li><a href="#" @click.prevent="page = 'home'" class="text-brand-gray hover:text-brand-dark">Blog</a></li>
                            <li><a href="#platform" @click="page = 'home'" class="text-brand-gray hover:text-brand-dark">Documentation</a></li>
                            <li><a href="#" @click.prevent="page = 'home'" class="text-brand-gray hover:text-brand-dark">Whitepapers</a></li>
                            <li><a href="#" @click.prevent="page = 'home'" class="text-brand-gray hover:text-brand-dark">EU AI Act</a></li>
                        </ul>
                    </div>
                    <div>
                        <h4 class="font-heading font-semibold text-brand-dark mb-3">Company</h4>
                        <ul class="space-y-2">
                            <li><a href="#" @click.prevent="page = 'home'" class="text-brand-gray hover:text-brand-dark">About Us</a></li>
                            <li><a href="#" @click.prevent="page = 'home'" class="text-brand-gray hover:text-brand-dark">Careers</a></li>
                            <li><a href="#" @click.prevent="page = 'home'" class="text-brand-gray hover:text-brand-dark">Contact</a></li>
                        </ul>
                    </div>
                    <div>
                        <h4 class="font-heading font-semibold text-brand-dark mb-3">Legal</h4>
                        <ul class="space-y-2">
                            <li><a href="#" @click.prevent="page = 'home'" class="text-brand-gray hover:text-brand-dark">Privacy Policy</a></li>
                            <li><a href="#" @click.prevent="page = 'home'" class="text-brand-gray hover:text-brand-dark">Terms of Service</a></li>
                            <li><a href="#" @click.prevent="page = 'home'" class="text-brand-gray hover:text-brand-dark">DPA</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- 
      *** FIX: Moved Alpine.js definition and script tag to the end of the body ***
      and wrapped the definition in the 'alpine:init' event listener
      to ensure appState is registered correctly.
    -->
    <script>
        document.addEventListener('alpine:init', () => {
            Alpine.data('appState', () => ({
                open: false, 
                page: 'home',
                businessName: 'QuantumLeap AI LLC',
                isLoading: false,
                errorMessage: '',
                reportData: null, // This will hold the JSON response from Gemini

                // This function calls the Gemini API to populate the report
                async generateReport() {
                    this.isLoading = true;
                    this.errorMessage = '';
                    this.reportData = null;

                    // This is the JSON structure we demand from the Gemini API
                    const reportSchema = {
                        type: 'OBJECT',
                        properties: {
                            'overallStatus': {
                                type: 'OBJECT',
                                properties: {
                                    'score': { type: 'NUMBER' },
                                    'statusText': { type: 'STRING' },
                                    'health': { type: 'STRING' },
                                    'risk': { type: 'STRING' },
                                    'scoreSentiment': { type: 'STRING' }
                                }
                            },
                            'entityDetails': {
                                type: 'OBJECT',
                                properties: {
                                    'nmls': { type: 'STRING' },
                                    'nmlsStatus': { type: 'STRING' },
                                    'entity': { type: 'STRING' },
                                    'statusSentiment': { type: 'STRING' }
                                }
                            },
                            'keyMetrics': {
                                type: 'ARRAY',
                                items: {
                                    type: 'OBJECT',
                                    properties: {
                                        'metric': { type: 'STRING' },
                                        'value': { type: 'STRING' },
                                        'sentiment': { type: 'STRING' }
                                    }
                                }
                            },
                            'financialSnapshot': {
                                type: 'OBJECT',
                                properties: {
                                    'bank': { type: 'STRING' },
                                    'avgDeposits': { type: 'STRING' },
                                    'numDeposits': { type: 'NUMBER' },
                                    'avgWithdrawals': { type: 'STRING' },
                                    'avgAOB': { type: 'STRING' },
                                    'avgNSFs': { type: 'NUMBER' },
                                    'endingBal': { type: 'STRING' },
                                    'transfersIn': { type: 'NUMBER' },
                                    'thumpdriScore': { type: 'NUMBER' },
                                    'nsfSentiment': { type: 'STRING' },
                                    'scoreSentiment': { type: 'STRING' }
                                }
                            },
                            'monthlyBanking': {
                                type: 'ARRAY',
                                items: {
                                    type: 'OBJECT',
                                    properties: {
                                        'month': { type: 'STRING' },
                                        'totalCredits': { type: 'STRING' },
                                        'numCredits': { type: 'NUMBER' },
                                        'trueRevenue': { type: 'STRING' },
                                        'transfersIn': { type: 'NUMBER' },
                                        'avgBalance': { type: 'STRING' },
                                        'nsfOvd': { type: 'NUMBER' },
                                        'endBalance': { type: 'STRING' },
                                        'nsfSentiment': { type: 'STRING' }
                                    }
                                }
                            },
                            'publicRecords': {
                                type: 'OBJECT',
                                properties: {
                                    'uccFilings': {
                                        type: 'ARRAY',
                                        items: {
                                            type: 'OBJECT',
                                            properties: {
                                                'party': { type: 'STRING' },
                                                'type': { type: 'STRING' },
                                                'details': { type: 'STRING' }
                                            }
                                        }
                                    },
                                    'liens': {
                                        type: 'ARRAY',
                                        items: {
                                            type: 'OBJECT',
                                            properties: {
                                                'type': { type: 'STRING' },
                                                'amount': { type: 'STRING' },
                                                'details': { type: 'STRING' }
                                            }
                                        }
                                    },
                                    'courts': {
                                        type: 'ARRAY',
                                        items: {
                                            type: 'OBJECT',
                                            properties: {
                                                'type': { type: 'STRING' },
                                                'status': { type: 'STRING' },
                                                'details': { type: 'STRING' }
                                            }
                                        }
                                    }
                                }
                            },
                            'sosRecords': {
                                type: 'ARRAY',
                                items: {
                                    type: 'OBJECT',
                                    properties: {
                                        'entityName': { type: 'STRING' },
                                        'entityType': { type: 'STRING' },
                                        'formationDate': { type: 'STRING' },
                                        'entityId': { type: 'STRING' },
                                        'status': { type: 'STRING' },
                                        'agent': { type: 'STRING' },
                                        'statusSentiment': { type: 'STRING' }
                                    }
                                }
                            },
                            'aiSummary': { type: 'STRING' }
                        }
                    };

                    // This is the prompt we send to the Gemini API
                    const systemPrompt = 'You are an expert AI underwriting analyst. Your task is to generate a plausible, simulated business verification report for a given company name.\n\nYou must analyze the name and generate realistic-sounding financial data, public records, and an overall underwriting summary.\n- The data must be simulated and plausible.\n- \'sentiment\' fields must be \'positive\', \'negative\', or \'neutral\'.\n- You MUST return the data ONLY in the provided JSON schema. Do not output any text outside the JSON structure.\n- Populate all fields, including realistic arrays for \'monthlyBanking\', \'publicRecords\', and \'sosRecords\'. Make \'aiSummary\' a bulleted list of recommendations as a single string with \\n for new lines.';
                    
                    // Correctly escaped string concatenation for the user prompt
                    const userPrompt = 'Generate a complete, simulated underwriting report for the business: "' + this.businessName + '"';

                    try {
                        const apiKey = ''; // API key is handled by the environment
                        const apiUrl = 'https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=' + apiKey;

                        const payload = {
                            contents: [{ parts: [{ text: userPrompt }] }],
                            systemInstruction: {
                                parts: [{ text: systemPrompt }]
                            },
                            generationConfig: {
                                responseMimeType: 'application/json',
                                responseSchema: reportSchema,
                                temperature: 0.7
                            },
                            // We add Google Search grounding to try and find real public records
                            tools: [{ 'google_search': {} }]
                        };

                        // Exponential backoff for retries
                        let response;
                        let retries = 0;
                        const maxRetries = 5;
                        let delay = 1000;

                        while (retries < maxRetries) {
                            try {
                                response = await fetch(apiUrl, {
                                    method: 'POST',
                                    headers: { 'Content-Type': 'application/json' },
                                    body: JSON.stringify(payload)
                                });

                                if (response.ok) {
                                    break; // Success
                                }

                                // Handle rate limiting (429) and server errors (5xx)
                                if (response.status === 429 || response.status >= 500) {
                                    retries++;
                                    await new Promise(resolve => setTimeout(resolve, delay));
                                    delay *= 2; // Double the delay
                                } else {
                                    // Don't retry for other client-side errors (e.g., 400 Bad Request)
                                    const errorBody = await response.json();
                                    console.error('API Error Body:', errorBody);
                                    throw new Error('API request failed with status: ' + response.status);
                                }
                            } catch (fetchError) {
                                // Handle network errors
                                console.error('Fetch Error:', fetchError);
                                retries++;
                                await new Promise(resolve => setTimeout(resolve, delay));
                                delay *= 2;
                                if (retries >= maxRetries) {
                                    throw fetchError; // Rethrow after max retries
                                }
                            }
                        }


                        if (!response || !response.ok) {
                            throw new Error('API request failed after retries.');
                        }

                        const result = await response.json();

                        if (result.candidates && result.candidates.length > 0 &&
                            result.candidates[0].content && result.candidates[0].content.parts &&
                            result.candidates[0].content.parts.length > 0) {
                            
                            const jsonText = result.candidates[0].content.parts[0].text;
                            this.reportData = JSON.parse(jsonText);
                        } else {
                            console.error('Invalid API response structure:', result);
                            if (result.promptFeedback) {
                                console.error('Prompt Feedback:', result.promptFeedback);
                                throw new Error('API request blocked. Reason: ' + result.promptFeedback.blockReason);
                            }
                            throw new Error('No valid response from API.');
                        }

                    } catch (error) {
                        console.error('Error generating report:', error);
                        this.errorMessage = 'Failed to generate AI summary. Please try again. ' + error.message;
                    } finally {
                        this.isLoading = false;
                    }
                }
            }));
        });
    </script>
</body>
</html>
