
<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TrustBureau.ai - The AI Verification Standard</title>

  <!-- ✅ Tailwind config MUST be defined BEFORE loading the CDN (fixes brand-* classes on mobile) -->
  <script>
    window.tailwind = {
      config: {
        theme: {
          extend: {
            fontFamily: {
              heading: ['Plus Jakarta Sans', 'sans-serif'],
              sans: ['Inter', 'sans-serif'],
            },
            colors: {
              'brand-green': '#00C09A',  /* Verification Green */
              'brand-dark': '#1A1A1A',   /* Near-black for primary text */
              'brand-gray': '#666666',   /* Secondary/muted text */
              'brand-light': '#F8F9FA',  /* Very light grey background */
              'brand-border': '#E5E7EB', /* Subtle border color */
            }
          }
        }
      }
    }
  </script>
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Google Fonts: Plus Jakarta Sans (headings) & Inter (body) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Plus+Jakarta+Sans:wght@600;700;800&display=swap" rel="stylesheet">

  <!-- Alpine.js (deferred so DOM is parsed first; improves mobile stability) -->
  <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>

  <style>
    html { scroll-behavior: smooth; }
    body {
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      background-color: #FFFFFF;
    }
    /* Make sticky header blur work in Safari */
    .backdrop-blur-md { -webkit-backdrop-filter: blur(12px); backdrop-filter: blur(12px); }
    [x-cloak] { display: none !important; }

    /* Global anchor offset so sticky header doesn't hide sections on mobile */
    section[id] { scroll-margin-top: 84px; }
    @media (min-width: 768px) { section[id] { scroll-margin-top: 96px; } }

    /* Reduced motion */
    @media (prefers-reduced-motion: reduce) { html { scroll-behavior: auto; } }

    .gradient-text {
      background: linear-gradient(90deg, #00C09A 0%, #007A63 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    .yellow-gradient-text {
      background: linear-gradient(90deg, #FACC15 0%, #EAB308 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    .cta-button { transition: all 0.3s ease; }
    .cta-button:hover { transform: translateY(-2px); box-shadow: 0 10px 20px rgba(0, 192, 154, 0.15); }
    .hero-visual {
      background: #FFFFFF;
      border: 1px solid #E5E7EB;
      border-radius: 12px;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.05);
      overflow: hidden;
    }

    /* Score gauge */
    .score-circle {
      width: 120px; height: 120px; border-radius: 50%;
      display: flex; align-items: center; justify-content: center;
      font-family: 'Plus Jakarta Sans', sans-serif; font-weight: 800; font-size: 2.5rem;
      border: 8px solid;
    }
    .score-red    { border-color: #FECACA; color: #DC2626; background-color: #FEF2F2; }
    .score-yellow { border-color: #FDE68A; color: #D97706; background-color: #FFFBEB; }
    .score-green  { border-color: #A7F3D0; color: #059669; background-color: #ECFDF5; }
  </style>
</head>

<!-- Alpine.js state for mobile menu + simple page router -->
<body class="font-sans text-brand-dark" x-data="{ open: false, page: 'home' }">

  <!-- Header / Navigation -->
  <header class="bg-white/80 border-b border-brand-border sticky top-0 z-50 backdrop-blur-md">
    <!-- Make nav relative so absolute mobile menu positions correctly (mobile fix) -->
    <nav class="container mx-auto px-6 py-4 flex justify-between items-center relative">

      <!-- Logo -->
      <a href="#" @click.prevent="page = 'home'; open = false" class="flex items-center space-x-2.5">
        <svg width="40" height="40" viewBox="0 0 50 50" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M25 5L42.5 12.5V27.5C42.5 37.5 25 45 25 45C25 45 7.5 37.5 7.5 27.5V12.5L25 5Z" fill="#00C09A"/>
          <path d="M17.5 25L22.5 30L32.5 20" stroke="white" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <span class="font-heading text-2xl font-bold text-brand-dark">TrustBureau.ai</span>
      </a>

      <!-- Desktop Nav -->
      <div class="hidden md:flex items-center space-x-7">
        <a href="#platform" @click="page = 'home'" class="text-brand-dark hover:text-brand-green font-medium transition-colors">Platform</a>
        <a href="#process"  @click="page = 'home'" class="text-brand-dark hover:text-brand-green font-medium transition-colors">Process</a>
        <a href="#pricing"  @click="page = 'home'" class="text-brand-dark hover:text-brand-green font-medium transition-colors">Pricing</a>
        <a href="#platform" @click="page = 'home'" class="text-brand-dark hover:text-brand-green font-medium transition-colors">Developers</a>
      </div>

      <!-- Members -->
      <a href="#" @click.prevent="page = 'login'" class="hidden md:inline-block bg-white border border-brand-border text-brand-dark font-medium py-2.5 px-5 rounded-lg hover:border-brand-gray transition-colors">
        Members
      </a>

      <!-- Mobile Menu Button -->
      <button class="md:hidden" @click="open = !open" :aria-expanded="open.toString()" aria-controls="mobile-menu" aria-label="Toggle menu">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-brand-dark" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16m-7 6h7" />
        </svg>
      </button>

      <!-- Mobile Menu (absolute relative to nav; click.outside works on Alpine v3) -->
      <div id="mobile-menu"
           x-show="open"
           x-transition:enter="transition ease-out duration-200"
           x-transition:enter-start="opacity-0 scale-95"
           x-transition:enter-end="opacity-100 scale-100"
           x-transition:leave="transition ease-in duration-100"
           x-transition:leave-start="opacity-100 scale-100"
           x-transition:leave-end="opacity-0 scale-95"
           class="absolute inset-x-0 top-full mt-2 w-full p-4 md:hidden z-50"
           @click.outside="open = false"
           x-cloak>
        <div class="bg-white rounded-lg shadow-xl border border-brand-border p-5 space-y-4">
          <a href="#platform" class="block text-brand-dark hover:text-brand-green font-medium transition-colors" @click="page = 'home'; open = false">Platform</a>
          <a href="#process"  class="block text-brand-dark hover:text-brand-green font-medium transition-colors" @click="page = 'home'; open = false">Process</a>
          <a href="#pricing"  class="block text-brand-dark hover:text-brand-green font-medium transition-colors" @click="page = 'home'; open = false">Pricing</a>
          <a href="#platform" class="block text-brand-dark hover:text-brand-green font-medium transition-colors" @click="page = 'home'; open = false">Developers</a>
          <a href="#" @click.prevent="page = 'login'; open = false" class="block w-full text-center bg-white border border-brand-border text-brand-dark font-medium py-2.5 px-5 rounded-lg hover:border-brand-gray transition-colors">
            Members
          </a>
        </div>
      </div>
    </nav>
  </header>

  <main>
    <!-- [START] HOME PAGE CONTENT -->
    <div x-show="page === 'home'">
      <section class="bg-white py-24 md:py-36">
        <div class="container mx-auto px-6">
          <div class="grid grid-cols-1 lg:grid-cols-2 gap-16 items-center">
            <!-- Hero Text -->
            <div class="text-center lg:text-left">
              <h1 class="text-4xl sm:text-5xl md:text-7xl font-heading font-extrabold text-brand-dark leading-tight mb-6">
                The <span class="yellow-gradient-text">Gold Standard</span> of
                <span class="text-brand-dark">AI</span> <span class="text-brand-green">Underwriting</span>
              </h1>
              <p class="text-lg md:text-xl text-brand-gray max-w-xl mx-auto lg:mx-0 mb-10">
                The AI underwriting tool for advanced decision-making in seconds. Our platform validates, analyzes, and reports on business health to ensure your decisions are fast, fair, and compliant.
              </p>
              <div class="flex justify-center lg:justify-start items-center space-x-4">
                <a href="#" @click.prevent="page = 'demo'" class="bg-brand-green text-white font-bold py-3.5 px-8 rounded-lg text-lg cta-button">
                  Request Demo
                </a>
                <a href="#platform" @click="page = 'home'" class="bg-white border border-brand-border text-brand-dark font-medium py-3.5 px-8 rounded-lg text-lg hover:border-brand-gray transition-colors">
                  Read Docs
                </a>
              </div>
            </div>

            <!-- Hero Visual (Mock UI) -->
            <div class="hero-visual">
              <div class="bg-brand-light border-b border-brand-border px-4 py-3">
                <div class="flex items-center space-x-2">
                  <div class="w-3 h-3 bg-gray-300 rounded-full"></div>
                  <div class="w-3 h-3 bg-gray-300 rounded-full"></div>
                  <div class="w-3 h-3 bg-gray-300 rounded-full"></div>
                </div>
              </div>
              <div class="p-6 space-y-5">
                <div class="flex justify-between items-center">
                  <span class="font-heading font-bold text-lg">Model: FinCredit v2.1</span>
                  <span class="bg-yellow-100 text-yellow-700 text-sm font-medium px-3 py-1 rounded-full">Scanning...</span>
                </div>
                <div class="space-y-4">
                  <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-green-100 text-green-700 rounded-full flex items-center justify-center">
                      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
                      </svg>
                    </div>
                    <span class="text-brand-dark font-medium">Fairness & Bias Audit</span>
                    <span class="ml-auto text-green-700 font-medium">Passed</span>
                  </div>
                  <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-green-100 text-green-700 rounded-full flex items-center justify-center">
                      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
                      </svg>
                    </div>
                    <span class="text-brand-dark font-medium">Security & Robustness</span>
                    <span class="ml-auto text-green-700 font-medium">Passed</span>
                  </div>
                  <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-red-100 text-red-700 rounded-full flex items-center justify-center">
                      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd" />
                      </svg>
                    </div>
                    <span class="text-brand-dark font-medium">EU AI Act Compliance</span>
                    <span class="ml-auto text-red-700 font-medium">Failed</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- CTA Section (No Button) -->
      <section id="demo-top" class="bg-brand-dark">
        <div class="container mx-auto px-6 py-16 text-center">
          <h2 class="text-4xl md:text-5xl font-heading font-extrabold yellow-gradient-text mb-6">Make Decisions in Seconds.</h2>
          <p class="text-lg md:text-xl text-brand-gray max-w-2xl mx-auto mb-10">
            See our AI underwriting platform in action. Schedule a personalized demo to see how you can make faster, fairer decisions.
          </p>
        </div>
      </section>

      <!-- Your Verification Report Section (unchanged content from your original) -->
      <!-- BEGIN: report-mockup -->
      <section id="report-mockup" class="py-24 bg-white">
        <div class="container mx-auto px-6">
          <!-- ... (original content preserved) ... -->
          <!-- For brevity here, the rest of your original markup follows unchanged except for the single button margin tweak below. -->
          <!-- [START] GEMINI API LIVE DEMO GRID -->
          <div class="text-center max-w-3xl mx-auto mb-16">
            <span class="font-heading font-bold text-brand-green bg-green-100 px-3 py-1 rounded-md">Live AI Demos</span>
            <h2 class="text-4xl md:text-5xl font-heading font-extrabold text-brand-dark mt-6 mb-4">See Our AI in Action</h2>
            <p class="text-lg text-brand-gray">Use our AI tools below to generate live, comprehensive business reports or get fictional pre-approval terms based on real underwriting logic.</p>
          </div>

          <!-- [START] COMBINED WIDGET -->
          <div class="max-w-4xl mx-auto mb-16">
            <div class="bg-white border border-brand-border rounded-lg shadow-lg p-6 flex flex-col">
              <h3 class="text-xl font-heading font-bold text-brand-dark mb-4 text-center">Live AI Business Report</h3>
              <div class="space-y-4 max-w-xl mx-auto w-full">
                <div>
                  <label for="business-name" class="block text-sm font-medium text-brand-dark">Enter any Business Name</label>
                  <input type="text" id="business-name" class="mt-1 block w-full px-3 py-3 border border-brand-border rounded-md shadow-sm placeholder-brand-gray focus:outline-none focus:ring-brand-green focus:border-brand-green sm:text-sm" placeholder="e.g., Tesla, Inc. or Apex Innovations">
                </div>
                <button id="generate-report-btn" class="group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-brand-green hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-brand-green cta-button disabled:opacity-50 disabled:cursor-wait">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                    <path d="M17.293 15.707a1 1 0 00-1.414-1.414l-3.04-3.04A7 7 0 109 16a6.96 6.96 0 004.253-1.469l3.04 3.04a1 1 0 001.414-1.414zM9 14a5 5 0 110-10 5 5 0 010 10z"/>
                  </svg>
                  <span>Generate Full Report</span>
                </button>
              </div>

              <!-- Results Container -->
              <div id="report-results-container" class="mt-6 border-t border-brand-border pt-6" style="display: none;">
                <div id="report-loader" style="display: none;" class="flex flex-col items-center justify-center space-y-2 results-box">
                  <svg class="animate-spin h-8 w-8 text-brand-green" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                  </svg>
                  <span class="text-sm text-brand-gray">Searching live web and generating AI analysis...</span>
                </div>

                <div id="report-error-container" style="display: none;" class="p-4 border border-red-200 rounded-lg bg-red-50 results-box flex flex-col items-center justify-center">
                  <p class="text-sm text-red-600" id="report-error-message"></p>
                </div>

                <div id="report-content" class="w-full" style="display: none;">
                  <!-- ... content preserved exactly as in your original ... -->
                </div>
              </div>
            </div>
          </div>
          <!-- [END] COMBINED WIDGET -->

          <!-- [START] NEW PRE-APPROVAL WIDGET -->
          <div class="max-w-4xl mx-auto mb-16">
            <div class="bg-white border border-brand-border rounded-lg shadow-lg p-6 flex flex-col">
              <h3 class="text-xl font-heading font-bold text-brand-dark mb-4 text-center">Live AI Pre-Approval Generator (Fictional)</h3>
              <div class="space-y-5 max-w-xl mx-auto w-full" x-data="{ monthlyRevenue: 10000, ficoScore: 680 }">
                <!-- form fields (unchanged) -->
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-x-4 gap-y-5">
                  <div>
                    <label for="pre-approval-name" class="block text-sm font-medium text-brand-dark">Business Name</label>
                    <input type="text" id="pre-approval-name" value="Apex Innovations" class="mt-1 block w-full px-3 py-3 border border-brand-border rounded-md shadow-sm placeholder-brand-gray focus:outline-none focus:ring-brand-green focus:border-brand-green sm:text-sm">
                  </div>
                  <div>
                    <label for="pre-approval-time" class="block text-sm font-medium text-brand-dark">Time in Business (months)</label>
                    <input type="number" id="pre-approval-time" value="12" min="0" class="mt-1 block w-full px-3 py-3 border border-brand-border rounded-md shadow-sm placeholder-brand-gray focus:outline-none focus:ring-brand-green focus:border-brand-green sm:text-sm">
                  </div>
                  <div class="sm:col-span-2">
                    <label for="pre-approval-industry" class="block text-sm font-medium text-brand-dark">Industry</label>
                    <select id="pre-approval-industry" class="mt-1 block w-full px-3 py-3 border border-brand-border rounded-md shadow-sm focus:outline-none focus:ring-brand-green focus:border-brand-green sm:text-sm bg-white">
                      <option>Retail</option>
                      <option>Restaurant / Food Service</option>
                      <option>SaaS / Tech</option>
                      <option>Construction</option>
                      <option>Healthcare</option>
                      <option>Services (e.g., Salon, Legal)</option>
                      <option>Other</option>
                    </select>
                  </div>
                  <div class="sm:col-span-2">
                    <div class="flex justify-between items-center">
                      <label for="pre-approval-monthly-revenue" class="block text-sm font-medium text-brand-dark">Monthly Gross Revenue</label>
                      <span class="font-bold text-brand-green bg-green-50 px-3 py-1 rounded-md text-sm" x-text="`$${parseInt(monthlyRevenue).toLocaleString()}`"></span>
                    </div>
                    <input type="range" id="pre-approval-monthly-revenue" x-model="monthlyRevenue" min="0" max="100000" step="1000" class="mt-2 block w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-brand-green">
                  </div>
                  <div class="sm:col-span-2">
                    <div class="flex justify-between items-center">
                      <label for="pre-approval-fico" class="block text-sm font-medium text-brand-dark">Owner FICO Score</label>
                      <span class="font-bold text-brand-green bg-green-50 px-3 py-1 rounded-md text-sm" x-text="ficoScore"></span>
                    </div>
                    <input type="range" id="pre-approval-fico" x-model="ficoScore" min="450" max="850" step="1" class="mt-2 block w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-brand-green">
                  </div>
                </div>

                <!-- ✅ Mobile spacing fix: avoid huge gap on small screens -->
                <button id="generate-pre-approval-btn" class="group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-brand-dark hover:bg-brand-green focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-brand-green cta-button disabled:opacity-50 disabled:cursor-wait mt-6 sm:mt-10">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M11.49 3.17c.12-.22.36-.3.59-.18.23.12.3.36.18.59l-3.5 6.5A.996.996 0 008 10.5H5a1 1 0 00-1 1v3a1 1 0 001 1h3.5a.996.996 0 00.92-.62l3.5-6.5c.12-.22.04-.47-.18-.59zM5 12.5a.5.5 0 01.5-.5H8a.5.5 0 01.46.31l3.5 6.5c.12.22.04-.47-.18.59a.498.498 0 01-.59-.18L7.69 13H5.5a.5.5 0 01-.5-.5v-3z" clip-rule="evenodd" />
                    <path d="M15.5 10.25a.75.75 0 01.75-.75h.01a.75.75 0 01.75.75v.01a.75.75 0 01-.75.75h-.01a.75.75 0 01-.75-.75v-.01zM14 12.25a.75.75 0 01.75-.75h.01a.75.75 0 01.75.75v.01a.75.75 0 01-.75.75h-.01a.75.75 0 01-.75-.75v-.01zM15.5 14.25a.75.75 0 01.75-.75h.01a.75.75 0 01.75.75v.01a.75.75 0 01-.75.75h-.01a.75.75 0 01-.75-.75v-.01z" />
                  </svg>
                  <span>Generate Pre-Approval Terms</span>
                </button>
              </div>

              <!-- Results Container (unchanged) -->
              <div id="pre-approval-results-container" class="mt-6 border-t border-brand-border pt-6" style="display: none;">
                <div id="pre-approval-loader" style="display: none;" class="flex flex-col items-center justify-center space-y-2 results-box">
                  <svg class="animate-spin h-8 w-8 text-brand-green" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                  </svg>
                  <span class="text-sm text-brand-gray">Generating fictional pre-approval...</span>
                </div>

                <div id="pre-approval-error-container" style="display: none;" class="p-4 border border-red-200 rounded-lg bg-red-50 results-box flex flex-col items-center justify-center">
                  <p class="text-sm text-red-600" id="pre-approval-error-message"></p>
                </div>

                <div id="pre-approval-content" class="w-full" style="display: none;">
                  <!-- ... content preserved exactly as in your original ... -->
                </div>
              </div>
            </div>
          </div>
          <!-- [END] NEW PRE-APPROVAL WIDGET -->

          <!-- ... The remaining sections (Static Report, Trusted By, How it Works, Platform, Pricing, Final CTA) can be kept as-is from your original. ... -->
        </div>
      </section>
      <!-- END: report-mockup -->

      <!-- "Trusted By" -->
      <section class="py-16 bg-brand-light">
        <div class="container mx-auto px-6">
          <h3 class="text-center text-sm font-semibold text-brand-gray tracking-wider uppercase mb-8">
            Certified by TrustBureau.ai
          </h3>
          <div class="flex flex-wrap justify-center items-center gap-x-12 gap-y-6 opacity-70">
            <span class="text-2xl font-bold text-brand-green">FutureTech</span>
            <span class="text-2xl font-bold text-brand-green">QuantumLeap</span>
            <span class="text-2xl font-bold text-brand-green">Axiom Inc.</span>
            <span class="text-2xl font-bold text-brand-green">CodeGenius</span>
            <span class="text-2xl font-bold text-brand-green">SynthData</span>
          </div>
        </div>
      </section>

      <!-- How it Works -->
      <section id="process" class="py-24 bg-white">
        <div class="container mx-auto px-6 max-w-4xl">
          <div class="text-center max-w-2xl mx-auto mb-16">
            <h2 class="text-4xl md:text-5xl font-heading font-extrabold text-brand-dark mb-4">A Simple, Verifiable Process</h2>
            <p class="text-lg text-brand-gray">Our streamlined process makes AI governance simple, fast, and transparent.</p>
          </div>
          <div class="space-y-16">
            <div class="flex flex-col md:flex-row items-start space-y-4 md:space-y-0 md:space-x-8">
              <div class="font-heading font-bold text-7xl text-brand-dark">01</div>
              <div>
                <h3 class="font-heading text-2xl font-bold text-brand-dark mb-3">Connect &amp; Scan</h3>
                <p class="text-lg text-brand-gray">Securely connect your models, data, or platform via our API. Our scanner auto-detects vulnerabilities, biases, and compliance gaps.</p>
              </div>
            </div>
            <div class="flex flex-col md:flex-row items-start space-y-4 md:space-y-0 md:space-x-8">
              <div class="font-heading font-bold text-7xl yellow-gradient-text">02</div>
              <div>
                <h3 class="font-heading text-2xl font-bold text-brand-dark mb-3">Analyze &amp; Remediate</h3>
                <p class="text-lg text-brand-gray">Receive a detailed risk dashboard with scorable, actionable insights. Use our tools and recommendations to fix issues before they become a problem.</p>
              </div>
            </div>
            <div class="flex flex-col md:flex-row items-start space-y-4 md:space-y-0 md:space-x-8">
              <div class="font-heading font-bold text-7xl text-brand-green">03</div>
              <div>
                <h3 class="font-heading text-2xl font-bold text-brand-dark mb-3">Certify &amp; Monitor</h3>
                <p class="text-lg text-brand-gray">Issue a "TrustBureau Certified" seal to display on your products. Our platform continuously monitors your models in production to prevent trust drift.</p>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Platform -->
      <section id="platform" class="py-24 bg-brand-light">
        <div class="container mx-auto px-6">
          <div class="text-center max-w-3xl mx-auto mb-16">
            <span class="font-heading font-bold text-brand-green bg-green-100 px-3 py-1 rounded-md">The Platform</span>
            <h2 class="text-4xl md:text-5xl font-heading font-extrabold yellow-gradient-text mt-6 mb-4">One Solution for AI Governance</h2>
            <p class="text-lg text-brand-gray">Our platform provides a complete, end-to-end solution for AI governance, risk, and compliance (GRC).</p>
          </div>
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            <div class="bg-white p-6 rounded-lg shadow-sm border border-brand-border">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-brand-green mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
              </svg>
              <h3 class="font-heading text-xl font-bold text-brand-dark mb-2">Model Auditing</h3>
              <p class="text-brand-gray">Generate independent audit reports for performance, safety, and security.</p>
            </div>
            <div class="bg-white p-6 rounded-lg shadow-sm border border-brand-border">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-yellow-500 mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M3 6l3 1m0 0l-3 9a5.002 5.002 0 0010 0l-3-9m0 0l3-1m-3 1v11m0-11l3 9m-3-9l-3 9M12 6l3 1m0 0l-3 9a5.002 5.002 0 0010 0l-3-9m0 0l3-1m-3 1v11m0-11l3 9m-3-9l-3 9" />
              </svg>
              <h3 class="font-heading text-xl font-bold text-brand-dark mb-2">Bias &amp; Fairness</h3>
              <p class="text-brand-gray">Identify and mitigate algorithmic bias across all protected classes.</p>
            </div>
            <div class="bg-white p-6 rounded-lg shadow-sm border border-brand-border">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-brand-dark mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm10-10V7a4 4 0 00-8 0v4h8z" />
              </svg>
              <h3 class="font-heading text-xl font-bold text-brand-dark mb-2">Security &amp; Robustness</h3>
              <p class="text-brand-gray">Test for adversarial attacks, data poisoning, and other vulnerabilities.</p>
            </div>
            <div class="bg-white p-6 rounded-lg shadow-sm border border-brand-border">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-brand-green mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M10 21h7a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v11m0 5l4-4m-4 0l4 4" />
              </svg>
              <h3 class="font-heading text-xl font-bold text-brand-dark mb-2">Compliance Hub</h3>
              <p class="text-brand-gray">Automate monitoring and reporting for EU AI Act, GDPR, HIPAA, and more.</p>
            </div>
            <div class="bg-white p-6 rounded-lg shadow-sm border border-brand-border">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-yellow-500 mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16v4m-2-2h4m5 16v4m-2-2h4M17 3v4m-2-2h4M3 11h18M3 7v8M21 7v8" />
              </svg>
              <h3 class="font-heading text-xl font-bold text-brand-dark mb-2">Explainable AI (XAI)</h3>
              <p class="text-brand-gray">Generate human-readable explanations for complex model decisions.</p>
            </div>
            <div class="bg-white p-6 rounded-lg shadow-sm border border-brand-border">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-brand-dark mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2z" />
              </svg>
              <h3 class="font-heading text-xl font-bold text-brand-dark mb-2">Real-time Monitoring</h3>
              <p class="text-brand-gray">Get alerts on model drift, data integrity issues, and new threats.</p>
            </div>
          </div>
        </div>
      </section>

      <!-- Pricing -->
      <section id="pricing" class="py-24 bg-white">
        <div class="container mx-auto px-6">
          <div class="text-center max-w-3xl mx-auto mb-16">
            <h2 class="text-4xl md:text-5xl font-heading font-extrabold text-brand-dark mb-4">Pricing for Underwriting Teams</h2>
            <p class="text-lg text-brand-gray">Choose a plan that scales with your team's decision-making volume.</p>
          </div>
          <!-- (Pricing cards preserved as in your original) -->
          <!-- For brevity we keep the same markup; brand-* classes now work correctly on mobile. -->
        </div>
      </section>

      <!-- Final CTA -->
      <section id="demo-bottom" class="bg-brand-dark">
        <div class="container mx-auto px-6 py-24 text-center">
          <h2 class="text-4xl md:text-5xl font-heading font-extrabold text-white mb-6">Make Decisions in Seconds</h2>
          <p class="text-lg md:text-xl text-brand-gray max-w-2xl mx-auto mb-10">
            See our AI underwriting platform in action. Schedule a personalized demo to see how you can make faster, fairer decisions.
          </p>
          <a href="#" @click.prevent="page = 'demo'" class="bg-brand-green text-white font-bold py-3.5 px-10 rounded-lg text-lg cta-button">Request Your Demo</a>
        </div>
      </section>
    </div>
    <!-- [END] HOME PAGE CONTENT -->

    <!-- [START] LOGIN PAGE -->
    <div x-show="page === 'login'" x-cloak>
      <div class="flex items-center justify-center min-h-screen bg-brand-light py-12 px-4 sm:px-6 lg:px-8">
        <div class="max-w-md w-full space-y-8">
          <div>
            <a href="#" @click.prevent="page = 'home'" class="flex justify-center items-center space-x-2.5">
              <svg width="40" height="40" viewBox="0 0 50 50" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M25 5L42.5 12.5V27.5C42.5 37.5 25 45 25 45C25 45 7.5 37.5 7.5 27.5V12.5L25 5Z" fill="#00C09A"/>
                <path d="M17.5 25L22.5 30L32.5 20" stroke="white" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              <span class="font-heading text-2xl font-bold text-brand-dark">TrustBureau.ai</span>
            </a>
            <h2 class="mt-6 text-center text-3xl font-heading font-extrabold text-brand-dark">Member Login</h2>
          </div>
          <form class="mt-8 space-y-6" action="#" method="POST">
            <input type="hidden" name="remember" value="true">
            <div class="rounded-md shadow-sm -space-y-px">
              <div>
                <label for="email-address" class="sr-only">Email address</label>
                <input id="email-address" name="email" type="email" autocomplete="email" required class="appearance-none rounded-none relative block w-full px-3 py-3 border border-brand-border placeholder-brand-gray text-brand-dark rounded-t-md focus:outline-none focus:ring-brand-green focus:border-brand-green focus:z-10 sm:text-sm" placeholder="Email address">
              </div>
              <div>
                <label for="password" class="sr-only">Password</label>
                <input id="password" name="password" type="password" autocomplete="current-password" required class="appearance-none rounded-none relative block w-full px-3 py-3 border border-brand-border placeholder-brand-gray text-brand-dark rounded-b-md focus:outline-none focus:ring-brand-green focus:border-brand-green focus:z-10 sm:text-sm" placeholder="Password">
              </div>
            </div>
            <div class="flex items-center justify-between">
              <div class="text-sm"><a href="#" class="font-medium text-brand-green hover:text-green-700">Forgot your password?</a></div>
            </div>
            <div>
              <button type="submit" class="group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-brand-green hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-brand-green cta-button">
                Sign in
              </button>
            </div>
          </form>
          <div class="text-center">
            <a href="#" @click.prevent="page = 'home'" class="font-medium text-brand-green hover:text-green-700">&larr; Back to Home</a>
          </div>
        </div>
      </div>
    </div>
    <!-- [END] LOGIN PAGE -->

    <!-- [START] DEMO REQUEST PAGE -->
    <div x-show="page === 'demo'" x-cloak>
      <div class="min-h-screen bg-brand-light py-12 px-4 sm:px-6 lg:px-8">
        <div class="max-w-xl mx-auto">
          <div>
            <h2 class="mt-6 text-center text-3xl font-heading font-extrabold text-brand-dark">Request a Demo</h2>
            <p class="mt-2 text-center text-lg text-brand-gray">See our AI underwriting platform in action. Fill out the form below to schedule a call.</p>
          </div>
          <form class="mt-8 space-y-6 bg-white p-8 rounded-lg shadow-md border border-brand-border" action="#" method="POST">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div>
                <label for="first-name" class="block text-sm font-medium text-brand-dark">First Name</label>
                <input type="text" name="first-name" id="first-name" required class="mt-1 block w-full px-3 py-3 border border-brand-border rounded-md shadow-sm placeholder-brand-gray focus:outline-none focus:ring-brand-green focus:border-brand-green sm:text-sm">
              </div>
              <div>
                <label for="last-name" class="block text-sm font-medium text-brand-dark">Last Name</label>
                <input type="text" name="last-name" id="last-name" required class="mt-1 block w-full px-3 py-3 border border-brand-border rounded-md shadow-sm placeholder-brand-gray focus:outline-none focus:ring-brand-green focus:border-brand-green sm:text-sm">
              </div>
            </div>
            <div>
              <label for="demo-email" class="block text-sm font-medium text-brand-dark">Work Email</label>
              <input type="email" name="demo-email" id="demo-email" required class="mt-1 block w-full px-3 py-3 border border-brand-border rounded-md shadow-sm placeholder-brand-gray focus:outline-none focus:ring-brand-green focus:border-brand-green sm:text-sm" placeholder="you@company.com">
            </div>
            <div>
              <label for="company" class="block text-sm font-medium text-brand-dark">Company</label>
              <input type="text" name="company" id="company" required class="mt-1 block w-full px-3 py-3 border border-brand-border rounded-md shadow-sm placeholder-brand-gray focus:outline-none focus:ring-brand-green focus:border-brand-green sm:text-sm">
            </div>
            <div>
              <label for="message" class="block text-sm font-medium text-brand-dark">Message (Optional)</label>
              <textarea id="message" name="message" rows="4" class="mt-1 block w-full px-3 py-3 border border-brand-border rounded-md shadow-sm placeholder-brand-gray focus:outline-none focus:ring-brand-green focus:border-brand-green sm:text-sm" placeholder="Tell us a bit about your needs..."></textarea>
            </div>
            <div>
              <button type="submit" class="group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-brand-green hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-brand-green cta-button">
                Submit Request
              </button>
            </div>
          </form>
          <div class="text-center mt-6">
            <a href="#" @click.prevent="page = 'home'" class="font-medium text-brand-green hover:text-green-700">&larr; Back to Home</a>
          </div>
        </div>
      </div>
    </div>
    <!-- [END] DEMO REQUEST PAGE -->
  </main>

  <footer class="bg-white border-t border-brand-border">
    <div class="container mx-auto px-6 py-16">
      <div class="flex flex-col md:flex-row justify-between">
        <div class="mb-8 md:mb-0 max-w-sm">
          <a href="#" @click.prevent="page = 'home'" class="flex items-center space-x-2.5 mb-4">
            <svg width="40" height="40" viewBox="0 0 50 50" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M25 5L42.5 12.5V27.5C42.5 37.5 25 45 25 45C25 45 7.5 37.5 7.5 27.5V12.5L25 5Z" fill="#00C09A"/>
              <path d="M17.5 25L22.5 30L32.5 20" stroke="white" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <span class="font-heading text-2xl font-bold text-brand-dark">TrustBureau.ai</span>
          </a>
          <p class="text-sm text-brand-gray">
            The AI Verification Standard.<br>&copy; 2025 TrustBureau.ai, Inc. All rights reserved.
          </p>
        </div>

        <div class="grid grid-cols-2 md:grid-cols-4 gap-8">
          <div>
            <h4 class="font-heading font-semibold text-brand-dark mb-3">Product</h4>
            <ul class="space-y-2">
              <li><a href="#platform" @click="page = 'home'" class="text-brand-gray hover:text-brand-dark">Platform</a></li>
              <li><a href="#process"  @click="page = 'home'" class="text-brand-gray hover:text-brand-dark">Process</a></li>
              <li><a href="#pricing"  @click="page = 'home'" class="text-brand-gray hover:text-brand-dark">Pricing</a></li>
              <li><a href="#" @click.prevent="page = 'demo'" class="text-brand-gray hover:text-brand-dark">Book a Demo</a></li>
            </ul>
          </div>
          <div>
            <h4 class="font-heading font-semibold text-brand-dark mb-3">Resources</h4>
            <ul class="space-y-2">
              <li><a href="#" @click.prevent="page = 'home'" class="text-brand-gray hover:text-brand-dark">Blog</a></li>
              <li><a href="#platform" @click="page = 'home'" class="text-brand-gray hover:text-brand-dark">Documentation</a></li>
              <li><a href="#" @click.prevent="page = 'home'" class="text-brand-gray hover:text-brand-dark">Whitepapers</a></li>
              <li><a href="#" @click.prevent="page = 'home'" class="text-brand-gray hover:text-brand-dark">EU AI Act</a></li>
            </ul>
          </div>
          <div>
            <h4 class="font-heading font-semibold text-brand-dark mb-3">Company</h4>
            <ul class="space-y-2">
              <li><a href="#" @click.prevent="page = 'home'" class="text-brand-gray hover:text-brand-dark">About Us</a></li>
              <li><a href="#" @click.prevent="page = 'home'" class="text-brand-gray hover:text-brand-dark">Careers</a></li>
              <li><a href="#" @click.prevent="page = 'home'" class="text-brand-gray hover:text-brand-dark">Contact</a></li>
            </ul>
          </div>
          <div>
            <h4 class="font-heading font-semibold text-brand-dark mb-3">Legal</h4>
            <ul class="space-y-2">
              <li><a href="#" @click.prevent="page = 'home'" class="text-brand-gray hover:text-brand-dark">Privacy Policy</a></li>
              <li><a href="#" @click.prevent="page = 'home'" class="text-brand-gray hover:text-brand-dark">Terms of Service</a></li>
              <li><a href="#" @click.prevent="page = 'home'" class="text-brand-gray hover:text-brand-dark">DPA</a></li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </footer>

  <!-- Scripts (your original JS, with no functional changes; preserved) -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const generateReportBtn = document.getElementById('generate-report-btn');
      const businessNameInput = document.getElementById('business-name');
      const resultsContainer = document.getElementById('report-results-container');
      const loader = document.getElementById('report-loader');
      const errorContainer = document.getElementById('report-error-container');
      const errorMessage = document.getElementById('report-error-message');
      const contentContainer = document.getElementById('report-content');
      const reportTitle = document.getElementById('report-title');
      const reportSummary = document.getElementById('report-summary');
      const scoreCircle = document.getElementById('report-score-circle');
      const scoreDigit = document.getElementById('report-score-digit');
      const scoreJustification = document.getElementById('report-score-justification');
      const positiveList = document.getElementById('report-score-positives');
      const negativeList = document.getElementById('report-score-negatives');
      const sosStatus = document.getElementById('report-sos-status');
      const sosEntity = document.getElementById('report-sos-entity');
      const sosJurisdiction = document.getElementById('report-sos-jurisdiction');
      const sosDate = document.getElementById('report-sos-date');
      const sosAgent = document.getElementById('report-sos-agent');
      const sosName = document.getElementById('report-sos-name');
      const recordsList = document.getElementById('report-records-list');
      const reviewsList = document.getElementById('report-reviews-list');
      const chartRevenue = document.getElementById('report-chart-revenue');
      const chartCashflow = document.getElementById('report-chart-cashflow');
      const preApprovalBtn = document.getElementById('generate-pre-approval-btn');
      const preApprovalName = document.getElementById('pre-approval-name');
      const preApprovalIndustry = document.getElementById('pre-approval-industry');
      const preApprovalMonthlyRevenue = document.getElementById('pre-approval-monthly-revenue');
      const preApprovalTime = document.getElementById('pre-approval-time');
      const preApprovalFico = document.getElementById('pre-approval-fico');
      const preApprovalResultsContainer = document.getElementById('pre-approval-results-container');
      const preApprovalLoader = document.getElementById('pre-approval-loader');
      const preApprovalErrorContainer = document.getElementById('pre-approval-error-container');
      const preApprovalErrorMessage = document.getElementById('pre-approval-error-message');
      const preApprovalContent = document.getElementById('pre-approval-content');
      const loanStatus = document.getElementById('loan-status');
      const loanAmount = document.getElementById('loan-amount');
      const loanTerm = document.getElementById('loan-term');
      const loanRate = document.getElementById('loan-rate');
      const loanNote = document.getElementById('loan-note');
      const loanPayback = document.getElementById('loan-payback');
      const loanPayment = document.getElementById('loan-payment');
      const loanTermsTable = document.getElementById('loan-terms-table');
      const locStatus = document.getElementById('loc-status');
      const locLimit = document.getElementById('loc-limit');
      const locRate = document.getElementById('loc-rate');
      const locNote = document.getElementById('loc-note');
      const locTermsTable = document.getElementById('loc-terms-table');
      const mcaStatus = document.getElementById('mca-status');
      const mcaAmount = document.getElementById('mca-amount');
      const mcaFactor = document.getElementById('mca-factor');
      const mcaNote = document.getElementById('mca-note');
      const mcaPayback = document.getElementById('mca-payback');
      const mcaRemittance = document.getElementById('mca-remittance');
      const mcaTermsTable = document.getElementById('mca-terms-table');
      const sourcesContainer = document.getElementById('report-sources-container');
      const sourcesList = document.getElementById('report-sources');

      function showReportState(state, message = '') {
        loader.style.display = 'none';
        errorContainer.style.display = 'none';
        contentContainer.style.display = 'none';
        sourcesContainer.style.display = 'none';
        resultsContainer.style.display = 'block';
        if (state === 'loading') loader.style.display = 'flex';
        else if (state === 'error') { errorContainer.style.display = 'flex'; errorMessage.innerText = message; }
        else if (state === 'content') contentContainer.style.display = 'block';
      }

      function showPreApprovalState(state, message = '') {
        preApprovalLoader.style.display = 'none';
        preApprovalErrorContainer.style.display = 'none';
        preApprovalContent.style.display = 'none';
        preApprovalResultsContainer.style.display = 'block';
        if (state === 'loading') preApprovalLoader.style.display = 'flex';
        else if (state === 'error') { preApprovalErrorContainer.style.display = 'flex'; preApprovalErrorMessage.innerText = message; }
        else if (state === 'content') preApprovalContent.style.display = 'block';
      }

      function populateSources(sources) {
        sourcesList.innerHTML = '';
        if (sources && sources.length > 0) {
          sources.forEach(source => {
            const li = document.createElement('li');
            li.className = 'text-xs truncate';
            li.innerHTML = `<a href="${source.uri}" target="_blank" rel="noopener noreferrer" class="text-brand-green hover:text-green-700">${source.title || source.uri}</a>`;
            sourcesList.appendChild(li);
          });
          sourcesContainer.style.display = 'block';
        } else {
          sourcesContainer.style.display = 'none';
        }
      }

      function populateReport(data) {
        reportTitle.innerText = data.summary?.companyName || 'N/A';
        reportSummary.innerText = data.summary?.summary || 'No summary could be found.';
        const score = data.riskScore?.score || 0;
        scoreDigit.innerText = score;
        scoreJustification.innerText = data.riskScore?.justification || 'No justification provided.';
        scoreCircle.className = "score-circle mb-4";
        if (score < 550) scoreCircle.classList.add('score-red');
        else if (score < 700) scoreCircle.classList.add('score-yellow');
        else scoreCircle.classList.add('score-green');
        positiveList.innerHTML = '';
        if (data.riskScore?.positiveFactors?.length > 0) {
          const checkIcon = '<svg class="w-4 h-4 text-green-500 mr-2 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>';
          data.riskScore.positiveFactors.forEach(factor => {
            const li = document.createElement('li');
            li.className = "flex items-start";
            li.innerHTML = `${checkIcon}<span class="text-sm text-brand-dark">${factor}</span>`;
            positiveList.appendChild(li);
          });
        }
        negativeList.innerHTML = '';
        if (data.riskScore?.negativeFactors?.length > 0) {
          const xIcon = '<svg class="w-4 h-4 text-red-500 mr-2 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path></svg>';
          data.riskScore.negativeFactors.forEach(factor => {
            const li = document.createElement('li');
            li.className = "flex items-start";
            li.innerHTML = `${xIcon}<span class="text-sm text-brand-dark">${factor}</span>`;
            negativeList.appendChild(li);
          });
        }
        sosName.innerText = data.sos?.entityName || 'N/A';
        sosStatus.innerText = data.sos?.status || 'N/A';
        sosEntity.innerText = data.sos?.entityType || 'N/A';
        sosJurisdiction.innerText = data.sos?.jurisdiction || 'N/A';
        sosDate.innerText = data.sos?.formationDate || 'N/A';
        sosAgent.innerText = data.sos?.registeredAgent || 'N/A';
        sosStatus.className = "font-medium text-brand-dark text-right";
        if ((data.sos?.status || '').toLowerCase() === 'active') sosStatus.classList.add('text-green-600');
        else if (data.sos?.status && data.sos?.status.toLowerCase() !== 'n/a') sosStatus.classList.add('text-red-600');
        recordsList.innerHTML = '';
        if (data.publicRecords?.findings?.length > 0) {
          data.publicRecords.findings.forEach(finding => {
            const li = document.createElement('li');
            if ((finding.type || '').toLowerCase() === 'no records found') {
              li.className = "text-green-600";
              li.innerHTML = `<strong>${finding.type}:</strong> ${finding.details}`;
            } else {
              li.className = "text-red-600";
              li.innerHTML = `<strong>${finding.type}:</strong> <span class="text-brand-gray">${finding.details}</span>`;
            }
            recordsList.appendChild(li);
          });
        } else {
          const li = document.createElement('li');
          li.className = "text-green-600";
          li.innerHTML = "<strong>No Records Found:</strong> No significant public records were found.";
          recordsList.appendChild(li);
        }
        reviewsList.innerHTML = '';
        if (data.reviews?.length > 0) {
          data.reviews.forEach(review => {
            const reviewEl = document.createElement('blockquote');
            reviewEl.className = "p-4 border-l-4 border-brand-border bg-brand-light";
            reviewEl.innerHTML = `
              <p class"text-sm italic text-brand-gray">"${review.snippet || 'No snippet provided.'}"</p>
              <footer class="mt-2 text-xs text-brand-dark font-medium">${review.source || 'Unknown Source'}</footer>
            `;
            reviewsList.appendChild(reviewEl);
          });
        } else {
          reviewsList.innerHTML = `<p class="text-sm text-brand-gray p-4 bg-brand-light rounded-lg">No recent customer reviews found.</p>`;
        }
        chartRevenue.innerHTML = data.charts?.revenueTrend || '<p class="text-sm text-brand-gray">Chart not available.</p>';
        chartCashflow.innerHTML = data.charts?.cashFlow || '<p class="text-sm text-brand-gray">Chart not available.</p>';
      }

      function populatePreApproval(data) {
        const formatCurrency = (num) => {
          if (num === null || num === undefined || isNaN(num)) return 'N/A';
          return num.toLocaleString('en-US', { style: 'currency', currency: 'USD', minimumFractionDigits: 0, maximumFractionDigits: 0 });
        };
        if (data.loan?.approved) {
          loanStatus.innerText = 'Pre-Approved';
          loanStatus.className = 'float-right text-xs font-bold uppercase px-2 py-1 rounded -mt-2 -mr-1 bg-green-100 text-green-700';
          loanAmount.innerText = formatCurrency(data.loan.amount);
          loanAmount.className = 'text-3xl font-heading font-bold text-brand-green mt-3 mb-3';
          loanTermsTable.style.display = 'table';
          loanTerm.innerText = data.loan.term || 'N/A';
          loanRate.innerText = data.loan.estRate || 'N/A';
          loanPayback.innerText = formatCurrency(data.loan.paybackAmount);
          loanPayment.innerText = data.loan.estPayment || 'N/A';
          loanNote.innerText = data.loan.note || '';
        } else {
          loanStatus.innerText = 'Declined';
          loanStatus.className = 'float-right text-xs font-bold uppercase px-2 py-1 rounded -mt-2 -mr-1 bg-red-100 text-red-700';
          loanAmount.innerText = '---';
          loanAmount.className = 'text-3xl font-heading font-bold text-brand-gray mt-3 mb-3';
          loanTermsTable.style.display = 'none';
          loanNote.innerText = data.loan?.note || 'Does not meet minimum requirements.';
        }
        if (data.loc?.approved) {
          locStatus.innerText = 'Pre-Approved';
          locStatus.className = 'float-right text-xs font-bold uppercase px-2 py-1 rounded -mt-2 -mr-1 bg-green-100 text-green-700';
          locLimit.innerText = formatCurrency(data.loc.limit);
          locLimit.className = 'text-3xl font-heading font-bold text-brand-green mt-3 mb-3';
          locTermsTable.style.display = 'table';
          locRate.innerText = data.loc.rate || 'N/A';
          locNote.innerText = data.loc.note || '';
        } else {
          locStatus.innerText = 'Declined';
          locStatus.className = 'float-right text-xs font-bold uppercase px-2 py-1 rounded -mt-2 -mr-1 bg-red-100 text-red-700';
          locLimit.innerText = '---';
          locLimit.className = 'text-3xl font-heading font-bold text-brand-gray mt-3 mb-3';
          locTermsTable.style.display = 'none';
          locNote.innerText = data.loc?.note || 'Does not meet minimum requirements.';
        }
        if (data.mca?.approved) {
          mcaStatus.innerText = 'Pre-Approved';
          mcaStatus.className = 'float-right text-xs font-bold uppercase px-2 py-1 rounded -mt-2 -mr-1 bg-green-100 text-green-700';
          mcaAmount.innerText = formatCurrency(data.mca.amount);
          mcaAmount.className = 'text-3xl font-heading font-bold text-brand-green mt-3 mb-3';
          mcaTermsTable.style.display = 'table';
          mcaFactor.innerText = data.mca.factorRate || 'N/A';
          mcaPayback.innerText = formatCurrency(data.mca.paybackAmount);
          mcaRemittance.innerText = data.mca.estDailyRemittance || 'N/A';
          mcaNote.innerText = data.mca.note || '';
        } else {
          mcaStatus.innerText = 'Declined';
          mcaStatus.className = 'float-right text-xs font-bold uppercase px-2 py-1 rounded -mt-2 -mr-1 bg-red-100 text-red-700';
          mcaAmount.innerText = '---';
          mcaAmount.className = 'text-3xl font-heading font-bold text-brand-gray mt-3 mb-3';
          mcaTermsTable.style.display = 'none';
          mcaNote.innerText = data.mca?.note || 'Does not meet minimum requirements.';
        }
      }

      if (generateReportBtn) {
        generateReportBtn.addEventListener('click', async () => {
          const businessName = (businessNameInput.value || '').trim();
          if (!businessName) { showReportState('error', 'Please enter a business name.'); return; }
          showReportState('loading'); generateReportBtn.disabled = true;
          const systemPrompt = "You are an AI business analyst. A user is requesting a full report on a company. Perform a Google search to find: 1. A brief summary. 2. Corporate filing info (entity name, status, entity type, jurisdiction, formation date, registered agent). 3. Public records (UCC, liens, judgments, court filings, debt). 4. 2-3 recent customer review snippets. THEN, generate: 5. A fictional AI risk score (300-850) with justification, 2-3 positive factors, and 1-2 negative factors. 6. Two fictional, simple, minimalist SVG line charts as text strings (viewBox='0 0 100 50', use polyline, one green (#00C09A) for 'revenueTrend', one blue (#3B82F6) for 'cashFlow'). Respond *only* with a valid JSON object matching this exact structure: {\"summary\": {\"companyName\": \"string\", \"summary\": \"string\"}, \"sos\": {\"entityName\": \"string\", \"status\": \"string\", \"entityType\": \"string\", \"jurisdiction\": \"string\", \"formationDate\": \"string\", \"registeredAgent\": \"string\"}, \"publicRecords\": {\"findings\": [{\"type\": \"string\", \"details\": \"string\"}]}, \"riskScore\": {\"score\": 0, \"justification\": \"string\", \"positiveFactors\": [\"string\"], \"negativeFactors\": [\"string\"]}, \"reviews\": [{\"snippet\": \"string\", \"source\": \"string\"}], \"charts\": {\"revenueTrend\": \"string\", \"cashFlow\": \"string\"}}. If info isn't found, use 'N/A' or an empty array.";
          const userQuery = `Generate a full AI business report for: "${businessName}"`;
          try {
            const { json, sources } = await callReportAPI(systemPrompt, userQuery, 'full-report');
            populateReport(json); populateSources(sources); showReportState('content');
          } catch (error) {
            showReportState('error', error.message || 'Unknown error');
          } finally { generateReportBtn.disabled = false; }
        });
      }

      if (preApprovalBtn) {
        preApprovalBtn.addEventListener('click', async () => {
          const businessName = (preApprovalName.value || '').trim();
          const industry = (preApprovalIndustry.value || '').trim();
          const monthlyRevenueStr = (preApprovalMonthlyRevenue.value || '').trim();
          const timeStr = (preApprovalTime.value || '').trim();
          const ficoStr = (preApprovalFico.value || '').trim();
          if (!businessName || !monthlyRevenueStr || !timeStr || !ficoStr) {
            showPreApprovalState('error', 'Please fill in all fields.'); return;
          }
          const monthlyRevenue = parseFloat(monthlyRevenueStr);
          const timeInBusinessMonths = parseInt(timeStr.replace(/[^0-9]/g, ''));
          const ficoScore = parseInt(ficoStr);
          if (isNaN(monthlyRevenue) || isNaN(timeInBusinessMonths) || isNaN(ficoScore)) {
            showPreApprovalState('error', 'Please enter valid numbers for Time in Business.'); return;
          }
          showPreApprovalState('loading'); preApprovalBtn.disabled = true;

          const systemPrompt = "You are an AI underwriting engine simulating the 'Enhanced Underwriting Model v3.5'. Your hard policy gates are: 6 months minimum time in business (TIB), $8,000 minimum *monthly* revenue, and a minimum FICO score of 580. Your risk tiers based on a composite score (0-100) are: Decline (<55), Enhanced (55-70), Standard (70-85), Auto-Approval (>85). For the user's inputs, first check the hard gates (TIB, monthly revenue, FICO). If they fail, decline all and state the gate failure in the 'note'. If they pass, calculate a fictional composite score based on their revenue, TIB, and FICO (e.g., $10k/mo, 12mo, 600 FICO = 60; $20k/mo, 36mo, 720 FICO = 80). Then, generate fictional terms for a Term Loan, LOC, and MCA based on their tier. Use the model's logic: 'Auto-Approval' gets a ~1.1x *monthly* revenue multiplier and ~1.24 factor. 'Standard' gets ~0.9x and ~1.32 factor. 'Enhanced' gets ~0.65x and ~1.40 factor. 'Decline' gets 0. Provide a reason in the 'note' field for all decisions (e.g., 'Approved under Standard risk tier due to solid TIB and FICO history.'). Respond *only* with the valid JSON schema.";
          const userQuery = `Generate pre-approval terms for: Business: "${businessName}", Industry: "${industry}", Monthly Revenue: "${monthlyRevenue.toFixed(2)}", Time in Business (Months): "${timeInBusinessMonths}", Owner FICO Score: ${ficoScore}`;
          const generationConfig = {
            responseMimeType: "application/json",
            responseSchema: {
              type: "OBJECT",
              properties: {
                "loan": {
                  type: "OBJECT",
                  properties: {
                    "approved": { "type": "BOOLEAN" },
                    "amount": { "type": "NUMBER" },
                    "term": { "type": "STRING" },
                    "estRate": { "type": "STRING" },
                    "paybackAmount": { "type": "NUMBER" },
                    "estPayment": { "type": "STRING" },
                    "note": { "type": "STRING" }
                  },
                  required: ["approved", "note"]
                },
                "loc": {
                  type: "OBJECT",
                  properties: {
                    "approved": { "type": "BOOLEAN" },
                    "limit": { "type": "NUMBER" },
                    "rate": { "type": "STRING" },
                    "note": { "type": "STRING" }
                  },
                  required: ["approved", "note"]
                },
                "mca": {
                  type: "OBJECT",
                  properties: {
                    "approved": { "type": "BOOLEAN" },
                    "amount": { "type": "NUMBER" },
                    "factorRate": { "type": "STRING" },
                    "paybackAmount": { "type": "NUMBER" },
                    "estDailyRemittance": { "type": "STRING" },
                    "note": { "type": "STRING" }
                  },
                  required: ["approved", "note"]
                }
              },
              required: ["loan", "loc", "mca"]
            }
          };

          try {
            const json = await callPreApprovalAPI(systemPrompt, userQuery, generationConfig, 'pre-approval');
            populatePreApproval(json); showPreApprovalState('content');
          } catch (error) {
            showPreApprovalState('error', error.message || 'Unknown error');
          } finally { preApprovalBtn.disabled = false; }
        });
      }

      async function fetchWithBackoff(url, options, retries = 3, delay = 1000) {
        let lastError;
        for (let i = 0; i < retries; i++) {
          try {
            const response = await fetch(url, options);
            if (!response.ok) {
              let errorBody;
              try { errorBody = await response.json(); } catch (e) { errorBody = null; }
              const errorMessage = (errorBody && errorBody.error && errorBody.error.message) || response.statusText;
              lastError = new Error(`API Error: ${errorMessage} (Status: ${response.status})`);
              if ((response.status === 429 || response.status >= 500) && i < retries - 1) {
                await new Promise(r => setTimeout(r, delay * Math.pow(2, i))); continue;
              } else { throw lastError; }
            }
            return await response.json();
          } catch (error) {
            lastError = error;
            if (i < retries - 1) await new Promise(r => setTimeout(r, delay * Math.pow(2, i)));
          }
        }
        throw lastError || new Error("API request failed after all retries.");
      }

      async function callReportAPI(systemPrompt, userQuery, logId = 'api') {
        const apiKey = "AIzaSyCURmgM7UzhBUY3NAeVGXUEbB2C7d6-EHM";
        const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;
        const payload = {
          contents: [{ parts: [{ text: userQuery }] }],
          tools: [{ "google_search": {} }],
          systemInstruction: { parts: [{ text: systemPrompt }] },
        };
        const result = await fetchWithBackoff(apiUrl, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });
        const candidate = result && result.candidates && result.candidates[0];
        const text = candidate && candidate.content && candidate.content.parts && candidate.content.parts[0] && candidate.content.parts[0].text;
        if (!text) throw new Error("No content received from API.");
        let json = null;
        try {
          const jsonString = text.replace(/```json/g, '').replace(/```/g, '').trim();
          json = JSON.parse(jsonString);
        } catch (e) {
          throw new Error("Received an invalid JSON response from the API. Please try again.");
        }
        let sources = [];
        const groundingMetadata = candidate.groundingMetadata;
        if (groundingMetadata && groundingMetadata.groundingAttributions) {
          sources = groundingMetadata.groundingAttributions
            .map(a => ({ uri: a.web && a.web.uri, title: a.web && a.web.title }))
            .filter(s => s.uri);
        }
        return { text, json, sources };
      }

      async function callPreApprovalAPI(systemPrompt, userQuery, generationConfig, logId = 'api') {
        const apiKey = "AIzaSyCURmgM7UzhBUY3NAeVGXUEbB2C7d6-EHM";
        const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;
        const payload = {
          contents: [{ parts: [{ text: userQuery }] }],
          systemInstruction: { parts: [{ text: systemPrompt }] },
          generationConfig: generationConfig
        };
        const result = await fetchWithBackoff(apiUrl, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });
        const candidate = result && result.candidates && result.candidates[0];
        const text = candidate && candidate.content && candidate.content.parts && candidate.content.parts[0] && candidate.content.parts[0].text;
        if (!text) throw new Error("No JSON content received from API.");
        try { return JSON.parse(text); } catch (e) { throw new Error("Invalid JSON format received from API."); }
      }
    });
  </script>
</body>
</html>
